<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2020-04-26 Sun 20:25 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Distributed Computing  MidSem Solutions</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Prabhaker Mateti" />
<meta name="description" content="Mateti's Distributed Computing"
 />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<style> P, LI {TBDtext-align: justify} code {color: brown;} @media screen {BODY {margin: 10%} }</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2019 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href="../"> UP </a>
 |
 <a accesskey="H" href="../../Top/index.html"> HOME </a>
</div><div id="preamble" class="status">
2020-02-22 | <a href="../../">../../</a>
</div>
<div id="content">
<h1 class="title">Distributed Computing  MidSem Solutions</h1>
<blockquote>
<p>
This take-home exam permits the use of a Linux/Windows laptop/PC
running javac, g++, Eclipse, Idea, and other software development
and drawing tools. It is otherwise a traditional closed book, closed
notes exam. In particular, you are honor bound <i><b>not</b></i> to Internet
surf or access any content already existing (other than as
indicated) once you access the exam until you turnin the
answers. The primary reasons in making this a take-home are to
relieve time pressure and give you a comfortable (computing/ home)
environment. Do not give or take help from others.
</p>

<p>
Submit your <code>answers.pdf</code> as an email attachment to me.
</p>

<p>
My answers: (i) Are illustrative/ pedagogical &#x2013; may not be the best
or the shortest.  (ii) TBD Include brief commentary on how the class
performed.
</p>
</blockquote>

<ol class="org-ol">
<li>(5 points each) The following statements may or may not be (fully or
partially) valid. Explain the underlined technical terms occurring in
each statement. Explain/ discuss/ dispute the statement. It is
<i>possible</i> to write no more than, say, five, lines each, and yet
receive full score.

<ol class="org-ol">
<li>"Some philosophers may remain hungry forever.'' is a <span class="underline">safety</span>,
not <span class="underline">liveness</span>, property.  <b>Answer:</b> Our Andrews book itself
uses "bad" and "good", which cannot be defined.  Many reproduced
this as the answer; I marked it as not full-scoring.  The
crucial word-groups are {never, for-ever, always, &#x2026;} and
{eventually, will-happen, &#x2026;}.  E.g., in {"A very good property
P never happens."}  P is a safety property.</li>
<li>In the context of <span class="underline">RPC</span>, a procedure designed to be used
remotely <i>can</i> use global variables to communicate with the
caller.  <b>Answer:</b> Def of RPC: Look up in lecture notes.  Global
variables can be used if you make a provision for sending any
values updated at the server back to the clients before
accessing its value.  The standard <code>rpcgen</code> does <b>not</b> do that;
so we expect our RPCs to use <span class="underline">in</span> and <span class="underline">out</span> parameters only.</li>
<li><p>
Consider the program segment given here.  Determine <i>P</i> a
predicate that characterizes the weakest deadlock-free
precondition for the program. Also, explain how you arrived at
P.
</p>
<pre class="example">
co &lt;await x &gt;= 7 -&gt; x := x - 3&gt;
|| &lt;await x &gt;= 6 -&gt; x := x + 1&gt;
|| &lt;await x &gt;= 5 -&gt; x := x + 1&gt;
oc
</pre>
<p>
<b>Answer:</b> <code>(x &gt; 7 or x = 5)</code> You can arrive at P using whatever
you have &#x2013; does not have to be wp.  It is useful to digest a
wrong answer, e.g., x = 7.  All three await-conditions are
satisfied, and one will be chosen by the system.  Suppose x &gt;= 7
is chosen, then x becomes 4. Neither of the two remaining
await-conditions are satisfied.  So, x = 7 is not the
answer. Would x ?= 8 work?  Would x ?= 6 or 5 work?  You work it
out.  Then you have to apply the "weakest" expectation that we
required.
</p></li>

<li><p>
Compute <i>wp(S, i = 100)</i>, where S is
</p>
<pre class="example">
if i &lt; 150 then i := i + 150 else i := 100 fi

</pre>
<p>
<b>Answer:</b> Obviously, you can guess the answer quickly, but this
Q is checking if you understood the wp-mechanism.  You work it
out.
</p></li>
</ol></li>

<li>(20 points each)

<ol class="org-ol">
<li>In the distributed programming context, <code>P(m); Critical-Section;
      V(m)</code> is not starvation-free.  Give a detailed starvation
scenario. What does Morris' algorithm do to eliminate this
scenario?  <b>Answer:</b>  Straightforward.  Re-read my lecture notes.</li>

<li>Construct the <code>ssend(pid, msg)</code> and <code>srecv(pid, msg)</code> primitives
of synchronous message passing from <code>asend(pid, msg)</code> and
<code>arecv(pid, msg)</code> primitives of asynchronous message passing.</li>
<li><p>
Reconstruct the binary "tree" serialized below. List each node as
a triplet of (info integer, left-link and right-link), as usual. 
The first digit in the sequence is the offset of the root node.
</p>
<pre class="example">
marshalled sequence: 2 3 4 7 4 7 8 4 A 1 4 2 7
offsets in hex:      1 2 3 4 5 6 7 8 9 A B C D

</pre>
<p>
<b>Answer:</b> node@2 = (3, left offset 3, right offset D), node@4 =(7,
4, 6), node@7 = (8, 8, 9), node@A = (1, B, C).  Figure TBD.
</p></li>
<li><p>
The <i>Recursive Data Representation: Small Set of Integers</i> of
Hoare's CSP paper is reproduced below. Extend it to respond to a
command <code>S(1)!remove(x)</code> from S(0) that removes x from the set, if
it contains it, and does nothing if it does not.
</p>

<pre class="example">
S(i: 1 .. 100) ::
*[   n: integer; S(i-1)?has(n) --&gt; S(0)!false
 []  n: integer; S(i-1)?insert(n) --&gt;
        *[  m: integer; S(i-1)?has(m) --&gt;
             [   m &lt;=  n --&gt; S(0)!(m = n)
             []  m &gt;   n --&gt; S(i+1)!has(m)
             ]
         [] m: integer; S(i-1)?insert(m) --&gt;
             [  m &lt; n --&gt; S(i+1)!insert(n); n := m
             [] m = n --&gt;  skip
             [] m &gt; n --&gt; S(i+1)!insert(m)
 ] ] ]
</pre>
<p>
<b>Answer:</b> (Just analysis and hints.  Based on my lecture after
this exam. Solution deliberately held back.) The CSP code above
has two loops.  Recall the invariant assertions of the
loops. Outer Loop Assertion: Control stays in the outer loop
when the S(i) process is empty handed. Once the control enters
the inner loop, S(i) now holds n. It never comes out of it
(because we do not yet have a remove operation).
</p>

<p>
Placement: So, where do we place the <code>remove(x)</code>?  Within the
inner loop.  On receiving <code>remove(x)</code> if x == n, S(i) should get
out of the inner loop.  But, CSP does not have a "break out of
loop", so we introduce a Boolean b which remains true in the
inner loop until x == n, when b is set to false.  Inner Loop
Assertion - Part 1: We cannot have S(i) empty handed unless all
S(i+1 .. 100) are also empty handed.  Inner Loop Assertion -
Part 2: Values held by S(j), for j &lt; i, are less than what S(i)
holds, S(j), for j &gt; i, are either holding values greater than
what S(i) holds, or are empty-handed.
</p>

<p>
Action to be taken: Left shift.  How?  Do we
first ask S(i+1) are you empty handed?  If yes, nothing to be
done.  If no, we should ask for the value it is holding.  S(i+1)
now changed state from not-empty to empty &#x2013; so it should take
the same action.  Pause this, and let us go back to remove(x)
reception.  Why did S(i) receive it?  Because S(i-1) held a
number n less than x.
</p>

<p>
For you to finish:  Write all of the CSP code for this problem.
</p>

<p>
Gotchas: Unmatched query bangs are deadlocks.  Do not make
assumptions that were not originally present (e.g., some numbers
do not appear in the set).
</p></li>
</ol></li>

<li>(0 points) [For survey purposes only.] Please record your effort in
minutes for each of the above <del>ten</del> eight items. Other feedback you
wish to give is also welcome.</li>
</ol>
</div>
<div id="postamble" class="status">
<hr size=1>Copyright &copy; 2020 &bull; <a href=mailto:pmateti@iiitd.ac.in>pmateti@iiitd.ac.in</a> &bull; 2020-02-22
</div>
</body>
</html>
