<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>WhiteBoard Using RMI: Main Page</title>
<link href="./tabs.css" rel="stylesheet" type="text/css"/>
<link href="./stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">WhiteBoard Using RMI
   </div>
   <div id="projectbrief">WSU CEG 730 WhiteBoard Using Java RMI</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="contents">
</div><!-- contents -->

<div id="content">
<h1 class="title">A White Board Project using Java RMI</h1>

<p>Please read <a href="http://cecs.wright.edu/~pmateti/Courses/7370/Projects/7370projects.html">7370 projects</a> first.  This 0README is a supplement to the
lectures.  It describes a bit of the philosophy behind the course and
some details of the source code given to you as a start.
</p>
<p>
This project implements the Whiteboard in Java using RMI, but leaves
out a few pieces for you TODO.  It should work equally well on both
Linux and Windows.  The overall behavior is similar to the 7370-C-RPC
Whiteboard.
</p>

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Compilation + Build</h2>
<div class="outline-text-2" id="text-1">


<p>
I did not use any fancy IDE, but you are welcome to use 
Intellij Idea, Eclipse, &hellip;
</p>

</div>

<div id="outline-container-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> Original v Generated Files</h3>
<div class="outline-text-3" id="text-1-1">


<p>
Study the files in this order.
</p>



<pre class="example">java7370.sh          // bash file, do: source java7370.sh
Invoke.java          // support methods 
LineCoords.java      // public data structure for a line 
LinesFrame.java      // our little window of lines 
LinesFrameImpl.java  // implementation of window of lines 
WbAdmin.java         // interface of wbadministrator 
WbServer.java        // interface of WhiteBoard server 
WbClient.java        // interface of WhiteBoard client 
WbClientImpl.java    // implementation of WhiteBoard client 
WbServerImpl.java    // implementation of WhiteBoard server 
</pre>


</div>

</div>

<div id="outline-container-1-2" class="outline-3">
<h3 id="sec-1-2"><span class="section-number-3">1.2</span> Simple Build</h3>
<div class="outline-text-3" id="text-1-2">


<p>
Make sure your <code>CLASSPATH</code> includes <code>.</code> and <code>..</code> .  The <code>rmic</code> is similar to
<code>rpcgen</code> but examines <code>.class</code> files, not <code>.java</code> files, in producing
several <code>_Stub.class</code> files
</p>
<p>
Make sure you are invoking the proper <code>javac</code> <code>java</code>, et al.  On OSIS
Lab systems, there are multiple versions of JDK installed.  The <code>java javac rmic rmiregistry rmid</code> should all be from the same package and
version.  <code>% which java</code> # check where your java JVM is located <code>% java -version</code>
</p>
<p>
You can call <code>wb7370build</code> defined in <code>java7370.sh</code>.  This is the simplest,
as <code>javac</code> subsumes some of the <code>Makefile</code> features.  Before invoking it,
make sure you are in the parent dir of <code>*.java</code> files.
</p>
</div>
</div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> How to Run It</h2>
<div class="outline-text-2" id="text-2">


<p>
Source <code>java7370.sh</code> to define the various <code>bash</code> methods used below.
</p>

</div>

<div id="outline-container-2-1" class="outline-3">
<h3 id="sec-2-1"><span class="section-number-3">2.1</span> java.policy</h3>
<div class="outline-text-3" id="text-2-1">


<p>
JDK installations will have their own system wide <code>java.policy</code> file;
e.g., on my machine the full path name is
<code>/usr/lib/jvm/jdk1.7.0_45/jre/lib/security/java.policy</code> The
<code>SocketPermission</code> s may not be good enough.  So, create a
<code>~/java.policy</code> file in your home directory.  It can be much more
detailed than the one below.
</p>



<pre class="example">% cat  &lt;&lt; EOF &gt; ~/java.policy
grant {
  permission java.net.SocketPermission "*:1024-65535", "connect,accept";
  permission java.net.SocketPermission "*:80", "connect";
};
EOF
</pre>


</div>

</div>

<div id="outline-container-2-2" class="outline-3">
<h3 id="sec-2-2"><span class="section-number-3">2.2</span> rmiregistry</h3>
<div class="outline-text-3" id="text-2-2">


<p>
Before starting the WB server and clients, do <code>wb7370rmi</code> to establish
<code>rmiregistry</code>.
</p>
<p>
For <code>rmiregistry</code>: If port 1099 is in use already, you need to make
corresponding edits in <code>Invoke.java</code>.  
</p>
</div>

</div>

<div id="outline-container-2-3" class="outline-3">
<h3 id="sec-2-3"><span class="section-number-3">2.3</span> Starting the WB Servers and Clients</h3>
<div class="outline-text-3" id="text-2-3">


<p>
There are several ways of running our Java WB program. <code>wb7370run</code>
defined in <code>java7370.sh</code> is one such example that starts one server
and two clients each on two boards.
</p>
<p>
Server will print its URL, e.g.,
<code>//localhost/S1</code>.
</p>

<p>
In general, to start a client do: <code>% java WhiteBoard.WbClientImpl &lt;idn&gt; &lt;boardnm&gt; &lt;displayMcnm&gt; &lt;URL-of-server&gt;</code> The idn is an arbitrary
non-neg integer used as a pseudo process id.  An example URL for the
server is <code>//localhost/S1</code>.  The client will start a LinesFrame.
</p>
<p>
Or you may invoke these text-interactively from <code>% java WhiteBoard.WbAdmin</code> The disadvantage here is that the <code>stdout</code> is then
not seen.
</p>
<p>
You may find the <code>pj</code> alias  defined in java7370.sh useful.
</p>
</div>

</div>

<div id="outline-container-2-4" class="outline-3">
<h3 id="sec-2-4"><span class="section-number-3">2.4</span> How Does It Work</h3>
<div class="outline-text-3" id="text-2-4">


<p>
No client draws a line the moment you click in its window.  Instead,
the client sends the coordinates to its server, the server informs all
clients on this board, including this one, of this update.
</p>
<p>
<code>pleaseDie()</code>: If we <b>really</b> die in a remote method, the caller will
get an exception.  So, we make sure the method returns normally, and
die a little later.
</p>
<p>
<code>addClient()</code> occurs in <code>recvDisplayObj()</code>
</p>

</div>
</div>

</div>

<div id="outline-container-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> Subtleties</h2>
<div class="outline-text-2" id="text-3">


<p>
Window Expose(s): I did not find what the expose event is called in
Java.  So did a work around using <code>public void windowActivated(WindowEvent e)</code> Please send me a better solution!
So to see lines of a window that was just uncovered, click on the
title bar.
</p>
<p>
You may also find that occasionally some mouse clicks are "lost".
</p>
<p>
I do not think it is worth our time to properly fix these.
</p>
<p>
I did not focus at all on a nice GUI.  If that interests, by all means
improve it.
</p>
</div>
</div>
</div>

This page was manually edited because of a USE_MDFILE_AS_MAINPAGE bug.

<div id="postamble">
<hr size=1>Copyright &copy; 2014 
<a href="http://www.wright.edu/~pmateti">www.wright.edu/~pmateti</a>;
&nbsp;&nbsp;thanks to
<a href="http://www.doxygen.org/index.html"> doxygen</a>
</div>
</body>
</html>
