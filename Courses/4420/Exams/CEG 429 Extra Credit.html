<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=windows-1252">
	<TITLE></TITLE>
	<META NAME="GENERATOR" CONTENT="OpenOffice.org 1.1.0  (Win32)">
	<META NAME="CREATED" CONTENT="20040525;20293681">
	<META NAME="CHANGED" CONTENT="20040525;22154704">
	<STYLE>
	<!--
		@page { size: 8.5in 11in; margin-left: 1.25in; margin-right: 1.25in; margin-top: 1in; margin-bottom: 1in }
		P { margin-bottom: 0.08in }
	-->
	</STYLE>
</HEAD>
<BODY LANG="en-US" DIR="LTR">
<P STYLE="margin-bottom: 0in">Extra Credit Assignment</P>
<P STYLE="margin-bottom: 0in">CEG429</P>
<P STYLE="margin-bottom: 0in">David Stuart</P>
<P STYLE="margin-bottom: 0in"><A HREF="mailto:david.stuart@wright.edu">david.stuart@wright.edu</A></P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in">1.</P>
<P STYLE="margin-left: 0.49in; margin-bottom: 0in">a.  A routing
table is used by the operating system to determine where to send
packets in its buffers on the next hop.  In the case of a host with
with two NICs each on a different network, it is not possible to set
up a routing table that is fully capable using only two rows.  For
instance, consider the following routing table:</P>
<P STYLE="margin-left: 0.49in; margin-bottom: 0in"><BR>
</P>
<pre>
	Destination	Gateway		Genmask		Iface
	192.168.17.0	    *		255.255.255.0	eth0
	192.168.18.0	    *		255.255.255.0	eth1
</pre>
<P STYLE="margin-left: 0.49in; margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-left: 0.49in; margin-bottom: 0in">While this example
would allow routing to both the 17.x and 18.x networks, any other
networks that may be attached to the 17.x or 18.x nets would not be
available (therefore the table is not fully capable).</P>
<P STYLE="margin-left: 0.49in; margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-left: 0.49in; margin-bottom: 0in">b.  SUID programs
are programs that when executed, run with the priviledges of the
owner of the program.  An SUID program will run with root priviledges
if it is owned by root.  
</P>
<P STYLE="margin-left: 0.49in; margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-left: 0.49in; margin-bottom: 0in">There are many
tasks on a Linux/Unix system that require this root priviledge, but
need to be accomplished by non-root users.  One such program is the
passwd program, which needs to make changes to the /etc/shadow and
the /etc/password files.  While it is possible to set up a Unix/Linux
system with no SUID programs, it is not very practical.  Users need
to be able to change their passwords along with other tasks.  A
system without SUID programs would not be very usable.</P>
<P STYLE="margin-left: 0.49in; margin-bottom: 0in"><BR>
</P>
<OL TYPE=i START=100>
	<LI><P STYLE="margin-bottom: 0in">MD5 checksums are the result of
	performing a checksum operation over the entire length of a file. 
	MD5s are used to verify the validity of certain important system
	files.  Valid versions of programs such as init, ps, du have know
	MD5 sums.  A system administrator can perform an MD5 checksum on
	these files and compare the result to the known good value.  If they
	don't match then they are not the original file.  While MD5
	checksums are a strong indicator of validity, they are not unique. 
	There exists root kit programs that can adjust MD5 sums of trojaned
	programs to match those of the originals.</P>
</OL>
<P STYLE="margin-left: 0.49in; margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-left: 0.49in; margin-bottom: 0in">d.  IP
Masquerading involves having the source IP address of a host changed
at a gateway device.  This gateway device may have the only valid IP
address on a network.  It accepts connections from its local network,
removes the source address and replaces it with its own source
address on another network.  This allows multiple computers on a
local net to use only one IP address to gain access to another net. 
See diagram below</P>
<P STYLE="margin-left: 0.49in; margin-bottom: 0in; page-break-before: always">
Diagram:  IP Masquerading</P>
<P STYLE="margin-left: 0.49in; margin-bottom: 0in"><BR>
</P>
<pre>
	[]-----------------------
	192.168.1.20		|
				|
	[]-------------------[     ]--------------
	192.168.1.21		|	130.108.120.0
				|
	[]-----------------------
	192.168.1.22
</pre>
<P STYLE="margin-left: 0.49in; margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-left: 0.49in; margin-bottom: 0in">Spoofing involves
forging a source address for the purpose of deception.  Both MAC
addresses and IP addresses can be spoofed.  IP spoofing is an IP
exploit.</P>
<P STYLE="margin-left: 0.49in; margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-left: 0.49in; margin-bottom: 0in">Smurfing is an IP
exploit that involves sending an ICMP ping with a spoofed victim's
source address to the broadcast address of a network.  Multiple hosts
on the receiving network will respond to the spoofed address, with
the possibility of overwhelming the host.</P>
<P STYLE="margin-left: 0.49in; margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-left: 0.49in; margin-bottom: 0in">Masquerading and
Smurfing are related to IP Spoofing in that both of these involve
replacing the IP source address.</P>
<P STYLE="margin-left: 0.49in; margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-left: 0.49in; margin-bottom: 0in">e.  Root kits are
used by attackers that have gained root priviledge on a server.  Root
kits typically install many trojaned and backdoored versions of
system files.  These can include compromised versions of init and
login.  These &ldquo;backdoors&rdquo; allow easier access to the
compromised system by avoiding the sometimes difficult task of
gaining unauthorized root access  (i.e. The exploit does not have to
be performed again).  Many Root Kits and Backdoors attempt to hide
themselves from system administrator view using various techniques.</P>
<P STYLE="margin-left: 0.49in; margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-left: 0.49in; margin-bottom: 0in">g.  Proper
configuration refers to having a system conform to commonly held
standards.  This includes having system files and utilities located
in the &ldquo;correct&rdquo; directories, having processes run with
the generally accepted level of authority, and having common network
services running on the ports commonly expected.  Also involved is
the turning off of services that are not needed and patching the
server to current patch levels.</P>
<P STYLE="margin-left: 0.49in; margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-left: 0.49in; margin-bottom: 0in">Fortification
involves taking extra steps beyond proper configuration to ensure
system integrity.  This may involve installation of 3<SUP>rd</SUP>
party applications (such as tripwire) to monitor system files and
processes, virus scanning applications, and others.  This may also
involve further limiting of common user rights to &ldquo;sensitive&rdquo;
areas of the file system.</P>
<P STYLE="margin-left: 0.49in; margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-left: 0.49in; margin-bottom: 0in">Hardening involves
making changes to the kernel to add addition security.</P>
<P STYLE="margin-left: 0.49in; margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-left: 0.49in; margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in; page-break-before: always">2.</P>
<P STYLE="margin-left: 0.49in; margin-bottom: 0in">a.  Public Key
encryption involves using two keys, a public key known by everyone
and a private key known only to the user.  Information encrypted with
a public key can only be decoded with the use of the private key. 
This is sometimes called asymmetric encryption.  It is useful in user
authentication in that it prevents usernames and passwords from being
easily sniffed, and can be used to verify that a host or user is
truly who they claim to be.  Digital Signatures (which use a public
key encryption scheme) can be used to verify a sender and a receiver
are who they claim to be.  The process is as follows:</P>
<P STYLE="margin-left: 0.49in; margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-left: 0.49in; margin-bottom: 0in">The first step
involves the sender calculating the one way hash of a message.  Then,
this hash is encrypted with the private key of the sender and used as
the message's digital signature.  The message is sent to the
receiver.  The receiver then again calculates the hash of the
message.  The signature is then decrypted using the public key.  The
hash and the decrypted signature are compared to see if they are the
same.  If so, the sender is verified.</P>
<P STYLE="margin-left: 0.49in; margin-bottom: 0in"><BR>
</P>
<OL TYPE=i START=100>
	<LI><P STYLE="margin-bottom: 0in">One Time passwords are passwords
	that can be used only once and are generated from a user's secret
	passphrase (that can be either memorized or held on a device) and
	randomly generated number.  As the password is good for only one
	use, it is difficult for attackers to use dictionary exploits or
	sniffers to gain access to a user's password.  One such example of
	the One Time password in use is the S/Key scheme which uses a
	passphrase, a seed value, and an iteration count between 1 and 100.</P>
</OL>
<P STYLE="margin-left: 0.49in; margin-bottom: 0in"><BR>
</P>
<OL TYPE=i START=500>
	<LI><P STYLE="margin-bottom: 0in">Telnet and FTP are both examples
	of programs that do not encrpyt communication between the host and
	the client.  For this reason, usernames, passwords, and any other
	information passed from host to client using these programs can be
	easily sniffed.  In addition, these programs can easily be hijacked,
	or killed using widely known exploits.  A better alternative to
	these programs are ssh and sftp.  These programs encrypt all their
	communication between the host and the client using public key
	encryption to prevent sniffing. They also only allow connections
	only from known machines and verify those connections via public key
	encryption.</P>
</OL>
<P STYLE="margin-bottom: 0in">3.</P>
<P STYLE="margin-bottom: 0in">	a.  The boot order is as Follows:</P>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<OL>
	<OL>
		<OL>
			<LI><P STYLE="margin-bottom: 0in">E4 &ndash; The boot loader loads
			the kernel.  The kernel initializes devices and memory.  It runs
			in priviledged mode and eventually starts the init process.</P>
			<LI><P STYLE="margin-bottom: 0in">E1 -  The Root Volume is
			mounted.  We are still in priviledged mode at this point</P>
			<LI><P STYLE="margin-bottom: 0in">E2 -  The init process is
			launched.  Init is the parent of all other processes.</P>
			<LI><P STYLE="margin-bottom: 0in">E3 -  xinetd is started by the
			init process to monitor network requests on ports defined by
			/etc/services</P>
			<LI><P STYLE="margin-bottom: 0in">E5 &ndash; getty is launched. 
			Getty is used to monitor the keyboard and passes information to
			the login program.</P>
		</OL>
	</OL>
</OL>
<P STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in; page-break-before: always">4.</P>
<pre>
David Stuart
CEG429
Question 4

Bottom of    DDDDDDDDEEEEEEEEEEEE  EEEE  FFFF  FFFF  FFFF  FFFF  top of
memory       89ABCDEF0123456789AB  CDEF  0123  4567  89AB  CDEF  memory
             buffer                sfp   ret   a     b     c

             JJSSSSSSSSSSSSSSCCss  ssss  0xD8  0x01  0x02  0x03
             ^ [------------]^ [------]   ^     ^    ^     ^
             |   Shellcode   |  /bin/sh   |     |    |     |
             |               |            |    a var b var c var
             |               |            | 
           Jump             Call        Return
                                        Address
top of                                                           bottom of											
stack                                                            stack


1.  The return address that has been changed by buffer overflow to 0xD8

2.  The jump command to the call

3.  cc - The Call command that goes to the beginning of shellcode and
puts the return address on the stack.

Bottom of Memory - the direction toward which the stack grows

Top of Stack - closest to the Bottom of memory

Top of Memory - Beginning of the stack

Bottom of Stack - closest to the top of memory

DDDDDDDDEEEEEEEEEEEE - the upper byte of the memory addresses of buffer

89ABCDEF0123456789AB - the lower byte of the memory addresses of buffer

EEEE - Upper byte of memory addresses of sfb

CDEF - lower byte of memory addresses of sfb

FFFF - Upper byte of memory addresses of Ret

0123 - Lower byte of memory addresses of Ret
</pre>
<P STYLE="margin-left: 0.49in; margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-left: 0.49in; margin-bottom: 0in"><BR>
</P>
</BODY>
</HTML>