<html>
  <head>
    <meta name="keywords" content="filesys">
    <title>4420/6420 Getting Started Lab Mateti</title>
    <style type="text/css">
      body {margin: 10% 10% 10% 10%;}
      a:hover      { color: blue; background-color: yellow; }
      a:active     { color: white; background-color: green;}
      @page { size: 8.5in 11in }
      @media screen {BODY {margin: 10%;} }
      P,li { text-align: justify }
      pre,tt,code {color: brown; border:blue 1px dotted;}
      body {counter-reset : h2;	}
      h2 {counter-reset : h3;	}
      h2:before {content : counter(h2,decimal) ". ";
      counter-increment : h2;	    }

      h2.nocount:before, h3.nocount:before {
      content : "";
      counter-increment : none; }
    </style>
  </head>

  <body>

    <table border="0" cellpadding="10" cellspacing="10" width="100%">
      <tr>
        <td width="33%"><a href="http://www.wright.edu/" target="_blank">
	    <img src="http://cecs.wright.edu/~pmateti/images/wsu-logo-xsm.gif" border="0" height="66"></a>
        </td>
        <td width="67%">
	        <h4><a href="http://www.cs.wright.edu/~pmateti/Courses/4420/">
              CEG 4420/6420: Host Computer Security </a></h4>
          <h1>Lab: Getting Started </h1>
	        Weight 5%; Due Date: Shown on the Home Page<br>
        </td>
    </table>

    <p>A lab in this course expects you to learn security related
      issues on Linux.  In a Lab, you will not be expected to write
      new code.</p>

    <p> This lab is to be done on "your own" Linux PC.  This lab gets
      you started on installing Linux and a decent config.

    <p> By the time this lab is due, we would have refreshed the
      essentials of (i) System Calls, (ii) File Volumes and (iii)
      Process Management that were done in
      <a href=https://cecs.wright.edu/~pmateti/Courses/2350/Lectures/OS-on-USB/OSonUSBLab.html>
        2350/Lectures/OS-on-USB/</a>.

    <h2> Task: Install a Linux Distro</h2>
    <ol>
      <li>Install on a USB drive a multi-boot Linux setup.  You will
      have better performance if you install this on a HDD/SSD.
      <li>
        One installation should be Knoppix and another Kali.  Use the
	      latest versions.  You will need a USBD of at least 8 GB.  For
	      details of how-to-do-it, you can visit the home page of Dr
	      Mateti's version of
        <a href="http://www.cs.wright.edu/~pmateti/Courses/2350/">
          CEG2350</a> and then click on the <a href=
https://web1.cs.wright.edu/~pmateti/Courses/2350/Labs/OS-on-USB/OSonUSBLab.html>
OS-on-USBD Lab</a>.  You can also visit
        <a href="http://www.pendrivelinux.com/">
        http://www.pendrivelinux.com/</a>, but this just gives you
        recipes without an explanation of how things work.

      <li>Verify that the USBD can boot a few different PC/Laptops
	that you have access to.  Capture screenshots.
      <li> If you have already done this, describe that effort.
    </ol>

      <h2>Task: Learn Linux Commands/ SysCalls/ Libraries</h2>

    <p> Coming into the course, you are expected to be comfortable
        with Linux commands.  Recall that CEG2350 and CEG4350 are in
        the prerequisite chain.

    <ol>
      <li> Try all the commands of the <a href="./minUnixCmd.html">
          Minimal List of Unix Commands</a> [You cannot claim to be
          Linux-familiar unless you have used them all a few times.]
        <ol type=a>
          <li>
            Use script (read <code>man script</code>) to demonstrate
            that you invoked the commands, and to capture stdin +
            stdout.  If what you captured is way too long, trim it.
          <li>A few commands cannot be run unless you are superuser;
            for such commands, just capture its message.  Better yet,
            use <tt>sudo</tt>, but beware of consequences.
        </ol>
      <li>Explain what the command
        <code> indent -kr -i2 -pmt *.C *.h</code> 
        does.  Include a description of the effect of the options <code>-kr
          -i2 -pmt.</code>  [The indent program may not be installed in
        the standard installation of your Linux distro.  On Kubuntu,
        install it using
        <code>apt install indent</code>]

      <li>
        Explain briefly in one or two lines what the following do.  
        <ol>
          <li> <code>ltrace, strace</code>
          <li> <code>nm, size</code>
          <li> <code>ldd</code>
        </ol>

      <li>The following  are standard library routines:<br>
        <code>fopen, fclose, fread, fwrite, fstat, fscanf, fprintf,
          printf, sprintf</code><br>Look up their functionality in
          both the local and the on-line man pages.  Describe their
          functionality briefly, one sentence each, in <b>your own
          words</b>.  Do these use syscalls?  Which?

      <li>Assuming none other than you is on *your* system, how many
        processes can you have that are simultaneously alive? Read up on
        what is known as a "Fork Bomb".
    </ol>

    <h2> Task: Study a Few Tiny Programs</h2>

    <p>The source code for a several tiny programs is given in the
      directory <a href=./StudyPrograms/> ./StudyPrograms</a>.  Study
      the source to see what syscalls and library calls they make, and
      how they are to be built, and the numerical relationships
      between the addresses of variable.

    <ol>
      <li>There is a Makefile included.  <code>make</code> will
        compile and link one program with no error messages.  It is
        using <code>CFLAGS = -g -Wall -ansi -pedantic</code> &nbsp;
        Explain what these flags cause <code>gcc</code> to do.  Expand
        the Makefile to become complete, so that all included programs
        in the directory are built properly.
      <li>List the names of 5 standard library routines <i>other than
          the ones listed in the above task</i>, and 5 corresponding
          system calls <i>used</i> by these tiny programs.
      <li>Improve the <tt>recurse</tt> above so that it recurses more
        deeply.  Explain what you did.
      <li>What is a "Segmentation Fault"?
      <li>
        What is the max amount of virtual memory can a Linux process
        have?
    </ol>


    <h2> Task: Bootup Sequence</h2>

    Objective: Study the booting sequence ending at login prompt.

    <ol>
      <li>Freshly reboot into your choice of (HDD/ SSD/ USBD installed)
        Linux. Wait for the GUI to show.
      <li>
        Save the output of ps with flags that show all processes with
        the greatest amount of detail. You will notice several gaps in the
        process id numbers.
      <li>
        Consider process ids in the ranges of 1 to 500, and 900 to
        1000. Note the missing pids. Among the missing ids, explain
        the details of <i>at least five</i> processes from the range 1
        to 500 and another five from 900 to 1000 that must have come
        to life, performed their duties, and terminated.  Be aware
        that the bash shell has many built in commands such as <code>echo</code>
        that do not cause process creation.
      <li>
        Among the running processes, identify <i>all</i> the daemon
        processes, and how and where from they were invoked.  The
        specific names of script files in the current installation of
        Linux are not necessarily rc.multiuser etc as indicated in the
        lectures.
      <li>
        Describe how the kernel selects the <code>init</code> program.
        Does the kernel log this info somewhere?
      <li>[Optional] [Bonus Points 20] [Devious.]  Plant an alternate,
        fully functional but rogue, init.  Did the kernel know it is
        invoking an alternate init, possibly a rogue init?  Suggest
        how we can discover the rogue init.
    </ol>
    
    <h2> Submission</h2>

    <p> You must follow the <a href=../Overview/labReports.html> Lab
      Report Template</a>.  There should be a section on each of the
      tasks.  A couple of lines of an answer to each (implied)
      question.  Use good judgement and do not make the report way
      longer than, say, 20 pages.  Submit explanations and code that
      verifies your answers.</p>
    <ol>
      <li>Submit a PDF file named *exactly* <code>Report-L1.pdf</code>.
      <li>Make a tar-ball of all source code files you changed.  Keep the
        directory structure.  Submit this tar-ball as <code>L1.tar.gz</code>.
      <li> Scripts are used to check various things -- so file names
        should obey such "rules".
    </ol>


    <h2> References</h2>

    <p>For links, visit the course home page.

    <ol>
      <li> Prabhaker Mateti, Lecture Notes on Linux Setup.
      <li> Prabhaker Mateti, Lecture Notes on Bootup.
    </ol>
    

    <hr>
    <table border="0" cellpadding="10" cellspacing="10" width="100%">
      <tr>
        <td width="33%">
          <a href="http://www.wright.edu/" target="_blank">
	    <img src="http://cecs.wright.edu/~pmateti/images/wsu-logo-xsm.gif" border="0" height="66"></a>
        </td>

        <td width="67%">
          <a href="http://www.cs.wright.edu/%7Epmateti/Courses/4420/">
              CEG 4420/6420</a>
          <h3><a name="Grading Sheet for Part 1">Grading Sheet for </a><br>
            Getting Started with Linux Lab</h3>
          Weight 5%<br>
          Instructor = 
          <a href="mailto:pmateti@wright.edu?subject=CEG4420">
         Dr Prabhaker Mateti</a>; Grader = TBA
        </td>
      </tr>
    </table>

    <table border="1" height="26" width="100%">
      <tbody>
        <tr>
          <td width="40%">Student</td>
          <td width="20%">Login</td>
          <td width="20%">Bonus</td>
          <td width="20%">Points</td>
        </tr>
      </tbody>
    </table>
    <p>Bonus points are awarded in recognition of good work, in addition to
      the max possible points.  Quality is subjectively judged. 
      Merely turning in a file will not receive full score.  Some items
      have a cascading effect.</p>
    <table border="1" width="100%">
      <tbody>
        <tr>
          <td><font width="80%" size="4">Item description</font></td>
          <td><font size="4">Assigned</font></td>
          <td><font size="4">Earned</font></td>
        </tr>
        <tr>
        </tr>
        <tr>
        </tr>

        <tr>
          <td>USBD MultiBoot </td>
          <td>20</td>
          <td> </td>
        </tr>


        <tr>
          <td>Learn Linux Commands/ SysCalls/ Libraries</td>
          <td>20</td>
          <td> </td>
        </tr>
        <tr><td>Studying Programs</td>
          <td>20</td>
          <td> </td>
        </tr>

        <tr>
          <td>Bootup </td>
          <td>20</td>
          <td> </td>
        </tr>

        <tr>
          <td>Journal</td>
          <td>20</td>
          <td> </td>
        </tr>
        <tr>
          <td>Late submission -5% per day late; not accepted after 5 days</td>
          <td>--</td>
          <td> </td>
        </tr>
        <tr>
          <td><b>Total</b></td>
          <td>100</td>
          <td> </td>
        </tr>
      </tbody>
    </table>


    <a href="http://www.cs.wright.edu/~pmateti/copyright.html">
      Copyright &copy;</a> 2020 &bull; <a target="_blank"
    href="http://www.cs.wright.edu/~pmateti"> Prabhaker Mateti</a>

</body>
</html>
