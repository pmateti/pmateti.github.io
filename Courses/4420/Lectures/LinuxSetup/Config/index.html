<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2020-09-02 Wed 14:29 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Configuring a System Properly</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Prabhaker Mateti" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<style> P,li {text-align: justify} code {color: brown;} @media screen {BODY {margin: 10%} }</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2019 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href="../"> UP </a>
 |
 <a accesskey="H" href="../../../Top/index.html"> HOME </a>
</div><div id="preamble" class="status">
<a href="../../"> ../../</a> | <a href=./>NoSlides</a>
</div>
<div id="content">
<h1 class="title">Configuring a System Properly</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgafaf838">1. Overview</a>
<ul>
<li><a href="#org90b3bd3">1.1. Abstract</a></li>
<li><a href="#org28a272a">1.2. Abstract #2</a></li>
<li><a href="#orgdf286a5">1.3. Educational  Objectives</a></li>
</ul>
</li>
<li><a href="#orgf399356">2. Booting Sequence</a></li>
<li><a href="#org0d0dc9f">3. Files and Installed Software</a></li>
<li><a href="#orgfe8cb1d">4. User Accounts and Passwords</a>
<ul>
<li><a href="#org372668f">4.1. Strong Password Policy</a></li>
</ul>
</li>
<li><a href="#orge31bb15">5. Shutdown Sequence</a></li>
<li><a href="#orgeaa2365">6. Lab Experiment</a></li>
<li><a href="#org3a521f1">7. References</a></li>
<li><a href="#org72473d7">8. End</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgafaf838" class="outline-2">
<h2 id="orgafaf838"><span class="section-number-2">1</span> Overview</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-org90b3bd3" class="outline-3">
<h3 id="org90b3bd3"><span class="section-number-3">1.1</span> Abstract</h3>
<div class="outline-text-3" id="text-1-1">
<ol class="org-ol">
<li>As many as a billion nodes connected to the Internet are personal
machines running Windows and Linux, with little supervision from
system administrators.  These have become targets of script kiddies.</li>
<li>This lecture and the associated lab experiment are intended to help
configure personal systems running Linux.</li>

<li>We focus on the security of Linux systems.  We only highlight what
needs to be done leaving out the recipe-level descriptions to the
references.</li>

<li>There are two other lectures related to the current lecture:
<a href="../../Fortification/">Fortification</a> and <a href="../../HardenOS/">Hardening</a>.</li>
</ol>
</div>
</div>

<div id="outline-container-org28a272a" class="outline-3">
<h3 id="org28a272a"><span class="section-number-3">1.2</span> Abstract #2</h3>
<div class="outline-text-3" id="text-1-2">
<ol class="org-ol">
<li>Systems as distributed and installed "out-of-the-box" are often
loosely configured.  This may be due to sloppiness of the
distributor.  More commonly it is because the distributor has tried
to configure a generic appeal-to-all setup.  Proper configuration
involves the examination of configuration settings of all installed
software.  This is a prerequisite to fortifying and/or hardening.</li>

<li>Proper configuration should happen immediately after a fresh
install of the OS, and then after making changes to the system
including adding or deleting services and user accounts.  It should
be done on the host machine without network connections.  We ignore
here the considerable amount of configuration tuning done to
improve performance, reduce resource usage, and in general for
cleanup.</li>

<li>The Internet Domain Survey ( <a href="https://www.isc.org/network/survey/">https://www.isc.org/network/survey/</a>)
reports the number of hosts advertised in the DNS.  As of Jul 2017
it is 1 billion.  Perhaps as many as 95% of these are personal
machines, the rest being various servers. Perhaps 80% of these
personal machines, and nearly 100% of those behind firewalls in
private LANs, are running Windows 10 and Linux with little
supervision from trained system administrators, the remaining
systems being other variants of Unix and Macintoshes.  These have
become targets of script kiddies.</li>
</ol>
</div>
</div>

<div id="outline-container-orgdf286a5" class="outline-3">
<h3 id="orgdf286a5"><span class="section-number-3">1.3</span> Educational  Objectives</h3>
<div class="outline-text-3" id="text-1-3">
<ol class="org-ol">
<li>Recognize that out of the box installations of OS are
insecure.</li>

<li>Know the typical problem spots.</li>

<li>Identify unneeded services</li>
</ol>
</div>
</div>
</div>

<div id="outline-container-orgf399356" class="outline-2">
<h2 id="orgf399356"><span class="section-number-2">2</span> Booting Sequence</h2>
<div class="outline-text-2" id="text-2">
<ol class="org-ol">
<li>Booting time is an excellent point where an attacker can install
Trojans.  Examine the booting sequence to verify that the kernel
and other executables are what they claim to be. = =Also,
compare the MD5 sums of the executables after each boot with those
you saved immediately after fresh install.</li>

<li>Reviewing inittab and Boot Scripts</li>

<li>Disabling Unneeded Services:  See below.</li>

<li>Configuring Services</li>

<li>Closing Network Ports and Disabling Runlevel System Services</li>

<li>Closing Network Ports and Disabling Xinetd Services</li>
</ol>
</div>
</div>

<div id="outline-container-org0d0dc9f" class="outline-2">
<h2 id="org0d0dc9f"><span class="section-number-2">3</span> Files and Installed Software</h2>
<div class="outline-text-2" id="text-3">
<ol class="org-ol">
<li>Installing a new OS image has become a straightforward
activity. Nearly all well-known Linux distributions and Windows can
be installed by non-computer specialist by booting from a supplied
DVD and answering a few questions. This activity is not the focus of
this lecture. In the lab experiment, we have simplified the install
problem further. There is a so-called "frugal install" which leaves
most of a Linux distribution installed as a single large (in the GB)
file that is an image of a compressed file system.  There is some
performance loss as a result, but there is also greater assurance
that the files within remain intact.</li>

<li>The rest of the lecture highlights checks you should make after
this initial phase of installing a new OS image, and associated
applications.  Depending on the distribution, the path names cited
below may be different.</li>

<li>Checking File Permissions and Ownership.  Examine all the files in
the standard directories: <code>/, /bin, /boot, /dev, /etc, /root</code>,
<code>/sbin, /usr, /usr/bin,</code> and <code>/usr/sbin.</code> These should
all be owned by root and not writeable to others.  The
<code>/tmp</code> and &lt;/var/tmp&gt; are world-writeable.  The file
<code>/etc/passwd</code> is world-readable for legacy reasons, but
<code>/etc/shadow</code> should be world-unreadable.</li>

<li>SUID executables: Examine every suid root file.  <code>find / -type f \( -perm
    -004000 -o -perm -002000 \) -exec ls -lg {} \;</code> will list all
the SUID/SGID files.  Verify that every such binary or script needs
to be set-user-id-ed. Setuid scripts are very vulnerable.  If POSIX 
capabilities are enabled, suid root permission can be removed.</li>

<li>Securing Postfix, Sendmail, &#x2026; . Do we need these?</li>

<li>Securing NFS and samba.</li>

<li>Securing SSH. Copying Files Using SSH Without Providing Login Prompts</li>
</ol>
</div>
</div>

<div id="outline-container-orgfe8cb1d" class="outline-2">
<h2 id="orgfe8cb1d"><span class="section-number-2">4</span> User Accounts and Passwords</h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-org372668f" class="outline-3">
<h3 id="org372668f"><span class="section-number-3">4.1</span> Strong Password Policy</h3>
<div class="outline-text-3" id="text-4-1">
<ol class="org-ol">
<li>Use tools such as "John the ripper" to find out weak users
passwords on your server. Configure <code>pam_cracklib.so</code> to enforce
the password policy.</li>

<li>Linux: Force Users To Change Their Passwords Upon First Login</li>
<li>Linux turn On / Off password expiration / aging</li>
<li>Search for all account without password and lock them</li>
<li>Use Linux groups to enhance security</li>

<li>Under Linux you can use the faillog command to display faillog
records or to set login failure limits. faillog formats the
contents of the failure log from /var/log/faillog database / log
file. It also can be used for maintains failure counters and
limits.</li>

<li>Only root account have UID 0 with full permissions to access the
system.</li>

<li>Enable Password Aging.  Restrict Use of Previous Passwords.  Lock
User Accounts After Too Many Login Failures.</li>

<li>Restricting Direct Login Access for System and Shared Accounts</li>

<li>Restricting <code>su</code> Access to System and Shared Accounts</li>
</ol>
</div>
</div>
</div>


<div id="outline-container-orge31bb15" class="outline-2">
<h2 id="orge31bb15"><span class="section-number-2">5</span> Shutdown Sequence</h2>
<div class="outline-text-2" id="text-5">
<ol class="org-ol">
<li>Shutdown time also is an excellent point where an attacker can
install Trojans.  A clever attacker would have downloaded the
needed files during the normal running, but would not have
installed them until most of the system was shut down.</li>
</ol>
</div>
</div>

<div id="outline-container-orgeaa2365" class="outline-2">
<h2 id="orgeaa2365"><span class="section-number-2">6</span> Lab Experiment</h2>
<div class="outline-text-2" id="text-6">
<p>
<a href="./config-lab.html">./config-lab.html</a>
</p>
</div>
</div>


<div id="outline-container-org3a521f1" class="outline-2">
<h2 id="org3a521f1"><span class="section-number-2">7</span> References</h2>
<div class="outline-text-2" id="text-7">
<ol class="org-ol">
<li><a href="https://wiki.ubuntu.com/BasicSecurity">https://wiki.ubuntu.com/BasicSecurity</a>  Required Reading.</li>

<li><a href="http://bastille-linux.sourceforge.net/">http://bastille-linux.sourceforge.net/</a> Bastille "&#x2026; locks down an
operating system, proactively configuring the system for increased
security and decreasing its susceptibility to compromise. &#x2026;
Bastille currently supports the Red Hat, &#x2026;, Debian
&#x2026; distributions, &#x2026;. It also supports Mac OS X.  &#x2026;  In its
assessment mode, it builds a report intended to teach the user
about available security settings &#x2026; ."  Bastille should use the
term &amp;quot;proper configuration&amp;quot; instead of
&amp;quot;hardening&amp;quot;. 201x.  Not actively being developed.  Good
choice for CEG6420 extra lab work.  Highly Recommended Reading.</li>

<li><a href="http://cisecurity.org/">http://cisecurity.org/</a> Center for Internet Security,
Security Configuration Benchmarks: Microsoft Windows 7
Benchmarks, 2012.  "The CIS Benchmarks are the only
consensus-based, best-practice security configuration guides both
developed and accepted by government, business, industry, and
academia."  Highly Recommended Reading.</li>

<li><a href="http://www.debian.org/doc/manuals/securing-debian-howto/">http://www.debian.org/doc/manuals/securing-debian-howto/</a>
securing-debian-howto.  "&#x2026;  Starting with the process of
securing and hardening the default Debian GNU/Linux
&#x2026; installation, &#x2026;  gives additional information on the
security tools available &#x2026;".  Required visit.</li>

<li>NIST, <a href="http://usgcb.nist.gov/">http://usgcb.nist.gov/</a> United States Government Configuration
Baseline, 2012.  "The purpose of the United States Government
Configuration Baseline (USGCB) initiative is to create security
configuration baselines for Information Technology products widely
deployed across the federal agencies.  Formal definitions of these
baseline settings, &#x2026;  supporting reference material for
implementing and verifying USGCB settings on target systems.
&#x2026; available for Windows 7, &#x2026;, Windows XP, Internet Explorer
&#x2026;"  Highly Recommended Reading.</li>

<li>NIST, <a href="http://nvd.nist.gov/">http://nvd.nist.gov/</a> National Vulnerability
Database, 2017.  "NVD contains content (and pointers to tools)
for performing configuration checking of systems implementing the
Federal Desktop Core Configuration (FDCC) using the Security
Content Automation Protocol (SCAP)."  Highly Recommended Reading.</li>

<li>Ubuntu, 
<a href="https://wiki.ubuntu.com/Security/Features">https://wiki.ubuntu.com/Security/Features</a>.  Even though Ubuntu
specific, there is much to learn here.  Required Reading.</li>

<li><a href="https://resources.sei.cmu.edu/asset_files/WhitePaper/2006_019_001_496737.pdf">https://resources.sei.cmu.edu/asset_files/WhitePaper/2006_019_001_496737.pdf</a>
UNIX Configuration Guidelines 2017</li>
</ol>
</div>
</div>

<div id="outline-container-org72473d7" class="outline-2">
<h2 id="org72473d7"><span class="section-number-2">8</span> End</h2>
<div class="outline-text-2" id="text-8">
</div>
</div>
</div>
<div id="postamble" class="status">
<hr size=1>Copyright &copy; 2018 <a href="http://www.wright.edu/~pmateti">www.wright.edu/~pmateti</a> &bull; 2018-09-10
</div>
</body>
</html>
