use IO::Socket;
for($i=0; $i <= 65555; $i++) {
    $server[$i] = 
	IO::Socket::INET->new(
	    Proto => 'tcp',
	    LocalPort => $i,
	    Listen => SOMAXCONN,
	    Reuse => 1) or print "Port $i Open \n" unless $server[$i];
    close ($server[$i]);
}
