<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Dependency Injection</title>
<!-- 2018-06-10 Sun 20:45 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Prabhaker Mateti" />
<meta  name="description" content="CS7140 Adv Software Engineering"
 />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<style> P {text-align: justify} code, pre {color: brown;} @media screen {BODY {margin: 10%} }</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href="../"> UP </a>
 |
 <a accesskey="H" href="../../Top/index.html"> HOME </a>
</div><div id="preamble" class="status">
<a href="../../"> ../../</a>
</div>
<div id="content">
<h1 class="title">Dependency Injection</h1>
<p>
TBD code examples from
<a href="https://hackernoon.com/you-dont-need-to-know-dependency-injection-2e9d2ba1978a">https://hackernoon.com/you-dont-need-to-know-dependency-injection-2e9d2ba1978a</a>
</p>

<p>
<a href="https://stackoverflow.com/questions/6550700/inversion-of-control-vs-dependency-injection">https://stackoverflow.com/questions/6550700/inversion-of-control-vs-dependency-injection</a>
</p>


<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Inversion of Control</h2>
<div class="outline-text-2" id="text-1">
<ol class="org-ol">
<li>Instead of source code of a program controlling the flow,
external sources (framework, services, other components) take
control of it.
</li>

<li>Inversion of Control is a key part of what makes a framework
different from a library.  A library call call does some work and
returns control to the client.
</li>

<li>Type 1 Interface Injection
</li>
<li>Type 2 Setter Injection
</li>
<li>Type 3 Constructor Injection
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Type 3 IoC‚Ää&#x2013; Constructor Injection</h2>
<div class="outline-text-2" id="text-2">
<p>
As the name implies, this component would receive its dependencies via
the constructor. Here‚Äôs what such a component would look like:
</p>

<div class="org-src-container">

<pre class="src src-C++" id="name">class Knight extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      weapon: props.weapon
    };
  }
  render() {
    return 'üê¥ ${this.state.weapon}';
  }
}
</pre>
</div>


<p>
And you would use it like this:
</p>

<p>
&lt;Knight weapon={sword} /&gt;
Of course, you should typically use the prop directly instead of duplicating it.
</p>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> Type 2 IoC‚Ää&#x2013; Setter Injection</h2>
<div class="outline-text-2" id="text-3">
<p>
Instead of setting dependencies in the constructor, a component would have methods available that can be called after initialization, with dependencies passed in as the argument.
</p>

<div class="org-src-container">

<pre class="src src-C++" id="name">class Knight extends React.Component {
  state = {};
  setWeapon = (weapon) =&gt; this.setState({ weapon });
  render() {
    return `üê¥ ${this.state.weapon}`;
  }
}
</pre>
</div>

<p>
Usage:
</p>

<p>
componentDidMount () {
  this.knight.setWeapon(sword);
}
render () {
  return &lt;Knight ref={c =&gt; this.knight = c} /&gt;;
}
#+end<sub>src</sub>
</p>

<p>
Again, you almost certainly would not want do this instead of passing dependencies directly via props.
</p>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> Type 1 IoC‚Ää&#x2013; Interface Injection</h2>
<div class="outline-text-2" id="text-4">
<p>
The props of a component are its interface to its clients, thus ‚Äúrequired props‚Äù would come the closest to an analogy for interface injection with React:
</p>

<div class="org-src-container">

<pre class="src src-C++" id="name">class Knight extends React.Component {
  static propTypes = {
    weapon: PropTypes.any.isRequired
  };
  render() {
    return `üê¥ ${this.props.weapon}`;
  }
}
</pre>
</div>

<p>
and you would use it simply as
</p>

<p>
&lt;Knight weapon={sword} /&gt;
I hope these examples illustrate how commonplace Dependency Injection has become, and gave you some talking points should the topic ever comes up.
</p>

<p>
The Component + Props pattern injects dependencies on construction, continues to update (set) the dependencies past initialization, and can enforce dependencies to be passed via the props interface. It‚Äôs all three patterns in one, at least in React. (Constructor Injection is indeed still popular/unavoidable in modern Angular)
</p>

<p>
Perhaps discussions around Render Props / Functions as Children (for example, Michael Jackson‚Äôs ‚ÄúUse a Render Prop!‚Äù, Donavon West‚Äôs ‚ÄúFunction as Child Components Are an Anti-Pattern‚Äù, and my own ‚ÄúSolving the problems of Higher Order Components ‚Ä¶‚Äù) could be seen as an extension of this conversation, where even the render function of a component is a dependency that can be injected. Libraries like Downshift epitomize this philosophy taken to its logical conclusion. But I doubt if the authors of those articles and libraries ever needed to concern themselves with that specific term.
</p>


<ol class="org-ol">
<li>Martin Fowler, June 2005,
<a href="https://martinfowler.com/bliki/InversionOfControl.html">https://martinfowler.com/bliki/InversionOfControl.html</a>
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> End</h2>
<div class="outline-text-2" id="text-5">
</div>
</div>
</div>
<div id="postamble" class="status">
<hr size=1>Copyright &copy; 2018 <a href="mailto:pmateti@wright.edu">pmateti@wright.edu</a> &bull; <a href="http://www.wright.edu/~pmateti"> www.wright.edu/~pmateti</a>  2018-06-12
</div>
</body>
</html>
