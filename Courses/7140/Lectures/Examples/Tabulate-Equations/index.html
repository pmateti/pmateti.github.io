<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Two Specifications of Tabulated Equations</title>
<!-- 2016-02-15 Mon 21:42 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Prabhaker Mateti" />
<meta  name="description" content="Software Engineering"
 />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<style> P {text-align: justify} code, pre {color: brown;} @media screen {BODY {margin: 10%} }</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/javascript" src="http://orgmode.org/mathjax/MathJax.js"></script>
<script type="text/javascript">
<!--/*--><![CDATA[/*><!--*/
    MathJax.Hub.Config({
        // Only one of the two following lines, depending on user settings
        // First allows browser-native MathML display, second forces HTML/CSS
        //  config: ["MMLorHTML.js"], jax: ["input/TeX"],
            jax: ["input/TeX", "output/HTML-CSS"],
        extensions: ["tex2jax.js","TeX/AMSmath.js","TeX/AMSsymbols.js",
                     "TeX/noUndefined.js"],
        tex2jax: {
            inlineMath: [ ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"], ["\\begin{displaymath}","\\end{displaymath}"] ],
            skipTags: ["script","noscript","style","textarea","pre","code"],
            ignoreClass: "tex2jax_ignore",
            processEscapes: false,
            processEnvironments: true,
            preview: "TeX"
        },
        showProcessingMessages: true,
        displayAlign: "center",
        displayIndent: "2em",

        "HTML-CSS": {
             scale: 100,
             availableFonts: ["STIX","TeX"],
             preferredFont: "TeX",
             webFont: "TeX",
             imageFont: "TeX",
             showMathMenu: true,
        },
        MMLorHTML: {
             prefer: {
                 MSIE:    "MML",
                 Firefox: "MML",
                 Opera:   "HTML",
                 other:   "HTML"
             }
        }
    });
/*]]>*///-->
</script>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href="../"> UP </a>
 |
 <a accesskey="H" href="../../"> HOME </a>
</div><div id="preamble" class="status">
<a href="../../"> ../../</a>
</div>
<div id="content">
<h1 class="title">Two Specifications of Tabulated Equations</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. Two Specifications of Tabulated Equations</a></li>
<li><a href="#sec-2">2. Informal Statement of the Problem</a></li>
<li><a href="#sec-3">3. A Good Spec</a></li>
<li><a href="#sec-4">4. A (More) Precise Spec</a></li>
</ul>
</div>
</div>
<p>
[This file is converted from a <a href="./tabeqn.tex">LaTeX file</a> to .org to .html.  It may
have not only my original errors, but also due to this conversion.
Here is the <a href="./tabeqn.pdf">pdf generated</a> from the LaTeX file.]
</p>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Two Specifications of Tabulated Equations</h2>
<div class="outline-text-2" id="text-1">
<p>
This note contains both a "good" answer, and a "really" precise
answer to an exam question in a Software Engineering class.  The
occasional commentary by this instructor is enclosed in brackets.
</p>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Informal Statement of the Problem</h2>
<div class="outline-text-2" id="text-2">
<p>
Consider the informal description, given in the next paragraph, of a
program.  Give a carefully written specification of it, using
well-chosen notations, and words.  Pretend that the requirements
analysis is already done: That is, wherever relevant in the specs,
explain in English the appropriate parts of requirements.
</p>

<p>
{Our mathematician friend wants a program that can "tabulate" a
sequence of symbolic equations found in typical linear algebra into a
matrix form.}
</p>

<p>
For example, given the input below
</p>

<pre class="example">
3x + 5y + 714z = 12g + 53b,
76489x +3z = 2g+8b+99a + 1024,
           x+ 49 = 7g,
1234567y+ 2z = a + 999b + 6x + 911,
 + 3x + 5y =  53b + 12g.
</pre>
<p>
your program should produce the result shown
</p>
<pre class="example">
    3x +       5y + 714z      = 12g +  53b,
76489x +              3z      =  2g +   8b + 99a +      1024,
     x +                   49 =  7g,
         1234567y +   2z      =       999b +   a + 6x +  911,
    3x +       5y             = 12g +  53b.
</pre>

<p>
Our friend  tells us that her equations do not contain
minus signs, nor floating point numbers, but that sometimes the
coefficients are larger than can fit in 64-bits, and the equations
become so long that she has to write them on a long scroll of paper
sideways.  We impressed her by remarking that we will imagine the
paper width to be infinity.
</p>
</div>
</div>


<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> A Good Spec</h2>
<div class="outline-text-2" id="text-3">
<p>
There are essentially three things we must consider. (1) What
are the preconditions? (2) Output looks "good".  (3) Output is
equivalent to the given input.  This solution is deliberately written
in an informal way to emphasize what needs to be specified versus how
to specify it.  So, find all the ambiguities &#x2013; but, do not just nit
pick! 
</p>

<p>
Since nothing particular is said about how i/o ought to be, we assume
that the required <code>tabulateeqn</code> program takes its textual input
from stdin and outputs to stdout.
</p>
</div>


<div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1"><span class="section-number-3">3.1</span> Syntax of Equations</h3>
<div class="outline-text-3" id="text-3-1">
<p>
The input must be a sentence derived from the non-terminal productions
of grammar given below.  Note that (a) an equation can span multiple
lines, and (b) terms of the same variable may occur multiply either in
the rhs or in the lhs or both.
</p>

<pre class="example">
eqns ::= eqn ',' eqn  '.'
eqn ::= lhs '=' rhs
lhs ::= exp
rhs ::= exp
exp ::= term | term '+' exp
term ::= number | coeff varid
coeff ::= empty | ['+'] number
varid ::= letter
</pre>

<p>
(Requirements Analysis: It is not clear if long equations are
presented on multiple lines in the input.  We will de facto allow it
as our grammar/parser of input takes care of it.  If our client
insists that that should not be permitted, our task becomes more
complex.  The required grammar is no longer context-free. )
</p>

<p>
[Other than using some kind of grammar, I know of no way to
describe this precondition.  Syntax diagrams etc. are, of course,
other ways of specifying context-free grammars.]
</p>

<p>
[Why should we let coeff begin with an optional plus?  Is the grammar
"unambiguous"?  What does unambiguous mean in this context?  The same
as in an "unambiguous specification"?  If duplicate-var-id terms are
not to be permitted in an equation, why does the required grammar
become more complex?  For that matter, are PLs context-free?]
</p>
</div>
</div>

<div id="outline-container-sec-3-2" class="outline-3">
<h3 id="sec-3-2"><span class="section-number-3">3.2</span> Output is Equivalent to the Input</h3>
<div class="outline-text-3" id="text-3-2">
<p>
[Item 3 was easier to do than item 2.  So we do that next.]
</p>

<p>
The output is also a sentence derivable from {\bnf eqns}.  The \(i\)-th
equation of the input is {\sl semantically equivalent} to the \(i\)-th
equation of output.  Two equations \(e_1 = e_2\) and \(e_3 = e_4\) are
equivalent if \(e_1\) is equivalent to \(e_3\), and \(e_2\) is equivalent to
\(e_4\).  An expression \(e\) is equivalent to \(f\) if both \(e\) and \(f\)
have the same terms, same number times in each.  Note that
permutations of terms is allowed.  Simplification of terms is not even
attempted.
</p>
</div>
</div>


<div id="outline-container-sec-3-3" class="outline-3">
<h3 id="sec-3-3"><span class="section-number-3">3.3</span> Output is Well-Formatted</h3>
<div class="outline-text-3" id="text-3-3">
<p>
(Requirements Analysis: Since we impressed our customer by remarking
that we will imagine the paper width to be infinity, we choose to
output each equation as one line, regardless of its length.)
</p>

<p>
Let n be the number of lines in the output.
</p>

<p>
The output consists of equations printed one per line.  The
order of the equations is the same as that of input.
</p>

<p>
To describe the formatting of the output, imagine dividing the 2-d
output into columns of  rows as follows.  Draw vertical
straight-lines, from the topmost line to the bottom-most spanning the n
 lines of output, immediately surrounding each variable id letter,
each '+' and the '=' .  Similarly draw a line to the
immediate right of each number, and one straight line at the leftmost
edge of the output.
</p>

<p>
The first (i.e., the leftmost) column must be a number-column.  Each
row in a column of numbers must be either a string of blanks, or a
right-justified number.
</p>

<p>
Each row of the equals-column must contain " = ".  Each row of
each plus-column must contain either a " + "  or three blanks.
All the rows of a variable id column must be 
either one blank or contain some letter, and all these letters
must be the same.
</p>

<p>
Should we also say "no column is all blanks".  I think not;
what say you?  What about "The first (i.e., the leftmost) column is a
number-column"?  
</p>
</div>
</div>
</div>


<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> A (More) Precise Spec</h2>
<div class="outline-text-2" id="text-4">
<p>
The following is a precise and rigorous spec.  Is it
error-free?  Is it complete?  Obviously, some of the sentences from
the preceding section need to be reproduced below if this section were
the only thing you wrote.  
</p>
</div>

<div id="outline-container-sec-4-1" class="outline-3">
<h3 id="sec-4-1"><span class="section-number-3">4.1</span> Syntax of Equations</h3>
<div class="outline-text-3" id="text-4-1">
<ol class="org-ol">
<li>Imagine [better yet: You write it!] a predicate parses-ok(G, N, s)
that yields true iff the string s is a sentence derivable from the
non-terminal N in the grammar G.
</li>

<li>Input must be a well-formed sentence of G: parses-ok(G, eqns,
input).
</li>

<li>Let us call the required program as TE.  Its signature is:
<code>function TE(fi: seq of eqn) returns fo: seq of line</code> where eqn is
a sentence generated by the non-terminal eqn of the grammar above.
</li>

<li>[The auxiliary function that obtains the fi and fo sequences
from their derivation trees is left as an exercise to you.  Note
that while the commas and the period in the input are helpful in
parsing, the fi sequence does not contain them; but the fo
does.]
</li>
</ol>
</div>
</div>


<div id="outline-container-sec-4-2" class="outline-3">
<h3 id="sec-4-2"><span class="section-number-3">4.2</span> Output is Equivalent to the Input</h3>
<div class="outline-text-3" id="text-4-2">
<ol class="org-ol">
<li>Two equations e: e<sub>1</sub> = e<sub>2</sub> and e': e<sub>3</sub> = e<sub>4</sub> are <i>semantically
equivalent</i>, semantically-eq(e, e'), if
<ol class="org-ol">
<li>bag-of-terms(e<sub>1</sub>) = bag-of-terms(e<sub>3</sub>), and
</li>
<li>bag-of-terms(e<sub>2</sub>) = bag-of-terms(e<sub>4</sub>).
</li>
</ol>
</li>

<li>semantically-equal-eqns(input, output) is-defined-as
<ol class="org-ol">
<li>&forall; i: 1..n (
<ol class="org-ol">
<li>parses-ok(G, eqn, fo[i]) and 
</li>
<li>semantically-eq(fi[i], fo[i]) ).
</li>
</ol>
</li>
</ol>
</li>

<li>[Note that in parses-ok(G, eqn, fo[i]), it is fo and not fi.  Why?
What is the signature of semantically-eq?  Is it ok to write
semantically-eq(fi[i], fo[i])?]
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-4-3" class="outline-3">
<h3 id="sec-4-3"><span class="section-number-3">4.3</span> Output is Well-Formatted</h3>
<div class="outline-text-3" id="text-4-3">
</div><div id="outline-container-sec-4-3-1" class="outline-4">
<h4 id="sec-4-3-1"><span class="section-number-4">4.3.1</span> Auxiliary Functions</h4>
<div class="outline-text-4" id="text-4-3-1">
<ol class="org-ol">
<li>#s denotes the length of sequence s.  First index of s is 1, not 0.
</li>
<li>isblank(s) is-defined-as  &forall; i: 1..#s (s[i] =  blank-char).
</li>

<li>isnumber(s) is-defined-as parses-ok(G, number, s).
</li>

<li>right-justified(s) is-defined-as &exist;  k: 1..#s
<ol class="org-ol">
<li>(isblank(s[1 .. k-1]) and
</li>
<li>isnumber(s[k .. k]) and
</li>
<li>isnumber(s[k .. #s]) )
</li>

<li>[Could we drop isnumber(s[k .. k])? Should we change
isnumber(s[k .. #s]) to isnumber(s[k+1 .. #s])?]
</li>
</ol>
</li>
</ol>
</div>
</div>



<div id="outline-container-sec-4-3-2" class="outline-4">
<h4 id="sec-4-3-2"><span class="section-number-4">4.3.2</span> There Exists a Matrix</h4>
<div class="outline-text-4" id="text-4-3-2">
<ol class="org-ol">
<li>We now imagine a matrix M of size n &times; c, with the following
properties.

<ol class="org-ol">
<li>Recall that n is the number of equations.  For now, we do not
know c; we simply postulate its existence.  We refer to M[*, y]
as the y-th column.
</li>

<li>well-formatted(M, c) is-defined-as
<ol class="org-ol">
<li>&forall; y: 1..c ( is-seq-chars(y) and equal-width(y) ) and
</li>

<li>&forall; y: 1..c ( is-a-plus(y) or is-an-equals(y) or
is-a-varid(y) or is-a-num(y))
</li>
</ol>
</li>
</ol>
</li>

<li>Each cell, M[i, j], contains a seq of characters: 

<ol class="org-ol">
<li>is-seq-chars(y) is-defined-as &forall; i: 1..n ( M[i, y] in seq of char).
</li>
</ol>
</li>

<li>Each row in a given column y is equal in width to the others in
that column:
<ol class="org-ol">
<li>equal-width(y) is-defined-as &forall; i, j: 1..n ( #M[i, y] = #M[j, y] )
</li>
</ol>
</li>

<li>Column y is a plus-column:
<ol class="org-ol">
<li>is-a-plus(y) is-defined-as
<ol class="org-ol">
<li>&forall; i: 1..n (M[i, y] =  " + " or isblank(M[i, y])) and
</li>
<li>&exist; i: 1..n (M[i, y] =  " + ")
</li>
<li>[The string " + " is blank-plus-blank.]
</li>
</ol>
</li>
</ol>
</li>

<li>Column y is an equals-column:
<ol class="org-ol">
<li>is-an-equals(y) is-defined-as 
<ol class="org-ol">
<li>&forall; i: 1..n ( M[i, y]) =  " = ")
</li>
</ol>
</li>
</ol>
</li>

<li>Column y is a varid column.  At least one row contains a
letter. Each row is either one blank or this letter.

<ol class="org-ol">
<li>is-a-varid(y) is-defined-as
<ol class="org-ol">
<li>&exist;  z: letter (&exist;  x: 1..n ( M[x, y] = z ) and
</li>
<li>&forall; i: 1..n ( M[i, y] = z or M[i, y] =  blank ) )
</li>
</ol>
</li>
</ol>
</li>

<li>Column y is a number-column.  At least one row contains a
number. Each row is either all-blanks or contains a right-justified
number:

<ol class="org-ol">
<li>is-a-num(y) is-defined-as
<ol class="org-ol">
<li>&forall; i: 1..n (
<ol class="org-ol">
<li>isblank(M[i, y]) or right-justified(M[i, y]) ) and
</li>
<li>&exist; i: 1..n ( isnumber(M[i, y]) )
</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-4-3-3" class="outline-4">
<h4 id="sec-4-3-3"><span class="section-number-4">4.3.3</span> Print the Rows of M</h4>
<div class="outline-text-4" id="text-4-3-3">
<p>
The i-th line of output is a printing of the i-th row of M followed by
either a comma, if i &lt; n, or a period if i = n.
</p>

<ol class="org-ol">
<li>print-all(M) is-defined-as
<ol class="org-ol">
<li>&forall; i: 1..n-1 (fo[i] =  print(i, M) +  ",") and
</li>
<li>fo[n] =  print(n, M) +  "."
</li>
</ol>
</li>

<li>Print(i, M) is simply a catenation of all the cells, l-to-r, of the i-th
row and then trimming any blanks at the tail end.
</li>

<li>[Define print(i, M). Shouldn't the previous section also say this?
Whatever happened to the value c?]
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-4-3-4" class="outline-4">
<h4 id="sec-4-3-4"><span class="section-number-4">4.3.4</span> Output is Looking Gooood!</h4>
<div class="outline-text-4" id="text-4-3-4">
<ol class="org-ol">
<li>looks-good(s, n, c) is-defined-as
<ol class="org-ol">
<li>&exist; m: array [1..n, 1..c] of seq of char
<ol class="org-ol">
<li>( well-formatted(m, c) and  s = print-all(m) )
</li>
</ol>
</li>
</ol>
</li>
</ol>
</div>
</div>
</div>

<div id="outline-container-sec-4-4" class="outline-3">
<h3 id="sec-4-4"><span class="section-number-3">4.4</span> Putting it all Together</h3>
<div class="outline-text-3" id="text-4-4">
<ol class="org-ol">
<li>output is-defined-as tabulateeqns( input ),
<ol class="org-ol">
<li>where tabulateeqns(input) is-defined-as  TE(convert-to-eqn-seq(input))
</li>
</ol>
</li>

<li>[convert-to-eqn-seq(input) is a companion to parses-ok.]
</li>

<li>This output is such that 
<ol class="org-ol">
<li>semantically-equal-eqns(input, output) and
</li>
<li>&exist; c: nat ( looks-good(output, \#q, c) ).
</li>
</ol>
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-4-5" class="outline-3">
<h3 id="sec-4-5"><span class="section-number-3">4.5</span> Discussion</h3>
<div class="outline-text-3" id="text-4-5">
<p>
The following are some imagined questions from students.
</p>

<p>
{\sl If we have some 40 minutes to spend on this problem, do you
expect us to finish it this well?}
</p>

<p>
{Well, if you want an A, yes! More seriously, an answer along the lines
of Section 2 is certainly expected.  Section 3 is home work that you
should be able to do a good draft in a few, say 4, hours.  Such a
draft probably contains errors.  It is best to let others read it.  If
that is not possible, read it yourself, but after a day or two.}
</p>

<p>
{\sl Is it worth spending this much effort in specifying instead of
producing a couple of hundred lines of code?}
</p>

<p>
{I think so.  There are no statistics that can validate or invalidate
this belief.  Assuming that the program being developed is not a
throw-away program, but has a long lifetime, the careful translation
of requirements to specs and then paraphrasing them back to the
user/client is an effective technique to prevent expensive design and
coding errors.}
</p>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<hr size=1>Copyright &copy; 2016 <a href="mailto:pmateti@wright.edu">pmateti@wright.edu</a> &bull; <a href="http://www.wright.edu/~pmateti"> www.wright.edu/~pmateti</a>  2016-01-27
</div>
</body>
</html>
