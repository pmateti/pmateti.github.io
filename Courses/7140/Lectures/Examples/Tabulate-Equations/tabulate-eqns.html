<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
               "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>tabulate-eqns</title>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="title" content="tabulate-eqns"/>
<meta name="generator" content="Org-mode"/>
<meta name="generated" content="2013-09-11T17:19-0400"/>
<meta name="author" content="Prabhaker Mateti"/>
<meta name="description" content="CS7140 Software Engineering Lecture"/>
<meta name="keywords" content=""/>
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  html { font-family: Times, serif; font-size: 12pt; }
  .title  { text-align: center; }
  .todo   { color: red; }
  .done   { color: green; }
  .tag    { background-color: #add8e6; font-weight:normal }
  .target { }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  {margin-left:auto; margin-right:0px;  text-align:right;}
  .left   {margin-left:0px;  margin-right:auto; text-align:left;}
  .center {margin-left:auto; margin-right:auto; text-align:center;}
  p.verse { margin-left: 3% }
  pre {
	border: 1pt solid #AEBDCC;
	background-color: #F3F5F7;
	padding: 5pt;
	font-family: courier, monospace;
        font-size: 90%;
        overflow:auto;
  }
  table { border-collapse: collapse; }
  td, th { vertical-align: top;  }
  th.right  { text-align:center;  }
  th.left   { text-align:center;   }
  th.center { text-align:center; }
  td.right  { text-align:right;  }
  td.left   { text-align:left;   }
  td.center { text-align:center; }
  dt { font-weight: bold; }
  div.figure { padding: 0.5em; }
  div.figure p { text-align: center; }
  div.inlinetask {
    padding:10px;
    border:2px solid gray;
    margin:10px;
    background: #ffffcc;
  }
  textarea { overflow-x: auto; }
  .linenr { font-size:smaller }
  .code-highlighted {background-color:#ffff00;}
  .org-info-js_info-navigation { border-style:none; }
  #org-info-js_console-label { font-size:10px; font-weight:bold;
                               white-space:nowrap; }
  .org-info-js_search-highlight {background-color:#ffff00; color:#000000;
                                 font-weight:bold; }
  /*]]>*/-->
</style>
<style> @media screen {BODY {margin: 10%} }</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>

</head>
<body>
<div id="org-div-home-and-up" style="text-align:right;font-size:70%;white-space:nowrap;">
 <a accesskey="h" href="../../Lectures"> UP </a>
 |
 <a accesskey="H" href="../../"> HOME </a>
</div>

<div id="preamble">
<a href="http://cecs.wright.edu/~pmateti/Courses/7140/">CS 7140 Advanced Software Engineering</a>
</div>

<div id="content">
<h1 class="title">tabulate-eqns</h1>


<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1 Two Specifications of Tabulated Equations</a>
<ul>
<li><a href="#sec-1-1">1.1 did not finish converting to org</a></li>
</ul>
</li>
<li><a href="#sec-2">2 Informal Statement of the Problem</a></li>
<li><a href="#sec-3">3 A Good Solution</a>
<ul>
<li><a href="#sec-3-1">3.1 Syntax of Equations</a></li>
<li><a href="#sec-3-2">3.2 Output is Well-Formatted</a></li>
</ul>
</li>
<li><a href="#sec-4">4 A Precise Solution</a>
<ul>
<li><a href="#sec-4-1">4.1 Syntax of Equations</a></li>
<li><a href="#sec-4-2">4.2 Output is Well-Formatted</a></li>
<li><a href="#sec-4-3">4.3 Output is Looking Gooood!</a></li>
<li><a href="#sec-4-4">4.4 Discussion</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Two Specifications of Tabulated Equations</h2>
<div class="outline-text-2" id="text-1">



</div>

<div id="outline-container-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> <span class="todo TODO">TODO</span> did not finish converting to org</h3>
<div class="outline-text-3" id="text-1-1">


<p>
This note contains both a "good''  answer, and
a "really'' Do you really know the meaning of "really''?
Look it up in a decent dictionary, such as Longman Dictionary
of Contemporary English.
precise answer to an exam question in a
Software Engineering class.  The occasional commentary by this
instructor is set in the type size of this paragraph.  
</p>
</div>
</div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Informal Statement of the Problem</h2>
<div class="outline-text-2" id="text-2">


<p>
Consider the informal description, given in the next paragraph, of a
program.  Give a carefully written specification of it, using
well-chosen notations, and words.  Pretend that the requirements
analysis is already done: That is, wherever relevant in the specs,
explain in English the appropriate parts of requirements.
</p>


<p>
Our mathematician friend wants a program that can "tabulate'' a
sequence of symbolic equations found in typical linear algebra into a
matrix form.
</p>
<p>
For example, given the input below
</p>



<pre class="example">3x + 5y + 714z = 12g + 53b,
76489x +3z = 2g+8b+99a + 1024,
           x+ 49 = 7g,
1234567y+ 2z = a + 999b + 6x + 911,
 + 3x + 5y =  53b + 12g.
</pre>

<p>
your program should produce the result shown
</p>


<pre class="example">    3x +       5y + 714z      = 12g +  53b,
76489x +              3z      =  2g +   8b + 99a +      1024,
     x +                   49 =  7g,
         1234567y +   2z      =       999b +   a + 6x +  911,
    3x +       5y             = 12g +  53b.
</pre>


<p>
Our friend  tells us that her equations do not contain
minus signs, nor floating point numbers, but that sometimes the
coefficients are larger than can fit in 64-bits, and the equations
become so long that she has to write them on a long scroll of paper
sideways.  We impressed her by remarking that we will imagine the
paper width to be infinity.
</p>

</div>

</div>

<div id="outline-container-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> A Good Solution</h2>
<div class="outline-text-2" id="text-3">


<p>
There are essentially three things we must consider. (1) What
are the preconditions? (2) Output looks good.  (3) Output is
equivalent to the given input.  This solution is deliberately written
in an informal way to emphasize what needs to be specified versus how
to specify it.  So, find all the ambiguities &ndash; but, do not just nit
pick! 
</p>
<p>
Since nothing particular is said about how i/o ought to be, we assume
that the required tabulateeqn program takes its textual input
from stdin and outputs to stdout.
</p>


</div>

<div id="outline-container-3-1" class="outline-3">
<h3 id="sec-3-1"><span class="section-number-3">3.1</span> Syntax of Equations</h3>
<div class="outline-text-3" id="text-3-1">


<p>
The input must be a sentence derived from the non-terminal eqns
of grammar  given below.  Note that (a) an equation can span
multiple lines, and (b) terms of the same variable may occur multiply
either in the rhs or in the lhs or both.
</p>



<pre class="example">eqns ::= eqn ',' eqn  '.'
eqn ::= lhs '=' rhs
lhs ::= exp
rhs ::= exp
exp ::= term  term '+' exp
term ::= number  coeff varid
coeff ::= empty  ['+'] number
varid ::= letter
</pre>


<p>
(Requirements Analysis: It is not clear if long equations are
presented on multiple lines in the input.  We will de facto allow it
as our grammar/parser of input takes care of it.
If our client insists that that should not be permitted, our
task becomes more complex.  The required grammar is no longer
context-free. )
</p>
<p>
Other than using some kind of grammar, I know of no way to
describe this precondition.  Syntax diagrams etc. are, of course,
other ways of specifying context-free grammars.  Why should we let
coeff begin with an optional plus?  Is the grammar
"unambiguous'' ?  What does unambiguous mean in this context?  The
same as in an "unambiguous specification'' ?  If duplicate-var-id
terms are not to be permitted in an equation, why does the required
grammar become more complex?  For that matter, are Pascal, C, Ada,
&hellip; context-free?  
</p>
<p>
Output is Equivalent to the Input
</p>
<p>
Item 3 was easier to do than item 2.  So we do that
next.
</p>
<p>
The output is also a sentence derivable from eqns.  The -th
equation of the input is semantically equivalent to the -th
equation of output.  Two equations  and  are
equivalent if  is equivalent to , and  is equivalent to
.  An expression  is equivalent to  if both  and 
have the same terms, same number times in each.  Note that
permutations of terms is allowed.  Simplification of terms is not even
attempted.
</p>

</div>

</div>

<div id="outline-container-3-2" class="outline-3">
<h3 id="sec-3-2"><span class="section-number-3">3.2</span> Output is Well-Formatted</h3>
<div class="outline-text-3" id="text-3-2">


<p>
(Requirements Analysis: Since we impressed our customer by remarking
that we will imagine the paper width to be infinity, we choose to
output each equation as one line, regardless of its length.)
</p>
<p>
Let n be the number of lines in the output.
</p>
<p>
The output consists of equations printed one per line.  The
order of the equations is the same as that of input.
</p>
<p>
To describe the formatting of the output, imagine dividing the 2-d
output into columns of  rows as follows.  Draw vertical
straight-lines, from the topmost line to the bottom-most spanning the n
 lines of output, immediately surrounding each variable id letter,
each '+' and the '=' .  Similarly draw a line to the
immediate right of each number, and one straight line at the leftmost
edge of the output.
</p>
<p>
The first (i.e., the leftmost) column must be a number-column.  Each
row in a column of numbers must be either a string of blanks, or a
right-justified number.
</p>
<p>
Each row of the equals-column must contain " = ".  Each row of
each plus-column must contain either a " + "  or three blanks.
All the rows of a variable id column must be 
either one blank or contain some letter, and all these letters
must be the same.
</p>
<p>
Should we also say "no column is all blanks''.  I think not;
what say you?  What about "The first (i.e., the leftmost) column is a
number-column'' ?  
</p>

</div>
</div>

</div>

<div id="outline-container-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> A Precise Solution</h2>
<div class="outline-text-2" id="text-4">




<p>
The following is a precise and rigorous spec.  Is it
error-free?  Is it complete?  Obviously, some of the sentences from
the preceding section need to be reproduced below if this section were
the only thing you wrote.  
</p>

</div>

<div id="outline-container-4-1" class="outline-3">
<h3 id="sec-4-1"><span class="section-number-3">4.1</span> Syntax of Equations</h3>
<div class="outline-text-3" id="text-4-1">


<p>
Imagine (better yet: You write it!) a predicate parses-ok
 that yields true iff the string  is a sentence derivable from
the non-terminal  in the grammar .
</p>

<p>
Input must be a well-formed sentence of :
parses-ok eqns, input.
</p>

<p>
Let us call the required program as TE.  Its signature is:
</p>
<p>
function TE(fi: seq of eqn) returns fo: seq of line
</p>

<p>
where eqn is a set of sentences generated by the eqn of
the grammar above.
</p>
<p>
The auxiliary function that obtains the  and  sequences
from their derivation trees is left as an exercise to you.  Note that
while the commas and the period in the input are helpful in parsing,
the  sequence does not contain them; but the  does.  
</p>
<p>
Output is Equivalent to the Input
</p>
<p>
Two equations  and  are semantically
equivalent,
</p>
<p>
semantically-eq
bag-of-terms bag-of-terms, 
bag-of-terms bag-of-terms.
</p>
<p>
semantically-equal-eqnsinput, output
</p>
<p> 
 parses-ok eqn,  and
 semantically-eq  .
</p>


<p>
Note that in parses-ok eqn, , it is  and
not .  Why?  What is the signature of semantically-eq?  Is it
ok to write  semantically-eq ,  ?
</p>

</div>

</div>

<div id="outline-container-4-2" class="outline-3">
<h3 id="sec-4-2"><span class="section-number-3">4.2</span> Output is Well-Formatted</h3>
<div class="outline-text-3" id="text-4-2">


<p>
There Exists a Matrix
</p>

<p>
We now imagine a matrix M of size , with the
following properties.
</p>
<p>
well-formatted
  is-seq-chars and equal-width  and 
</p>
<p>
 is-a-plus or is-an-equals or is-a-varid or is-a-num
</p>
<p>
Recall that  is the number of equations.  For now, we do not know
; we simply postulate its existence.  We refer to  as the
y-th column.
</p>
<p>
We need the following aux functions.
</p>

<p>
isblank  blank .
</p>

<p>
isnumber parses-ok.
</p>

<p>
rjustified 
 isblank and isnumber and
isnumber 
</p>
<p>
Could we drop isnumber?
Should we change   isnumber to isnumber?
</p>

<p>
Each cell, , contains a seq of characters:
is-seq-chars
   in seq of char .
</p>

<p>
Each row in a given column  is equal in
width to the others in that column:
equal-width
</p>



<p>
Column  is a plus-column: 
is-a-plus
</p>
<p>
    or isblank  and 
</p>


<p>
Column  is an equals-column:
is-an-equals
</p>


<p>
Column  is a varid column.  At least one row contains a letter.
Each row is either one blank or this letter.
</p>
<p>
is-a-varid
 letter
    and 
.   or  blank  
</p>

<p>
Column  is a number-column.  At least one row contains a number.
Each row is either all-blanks or contains a right-justified number:
is-a-num
  isblank or rjustified  and
  isnumber 
</p>
<p>
Print the Rows of M
</p>
<p>
The -th line of output is a printing of the -th row of M followed by
either a comma if , or a period if .
</p>

<p>
print-all
</p>
<p> 
 print ","  and
 print "."
</p>

<p>
Print is simply a catenation of all the columns of the -th
row and then trimming any blanks at the tail end.
</p>
<p>
Define print.
Shouldn't the previous section also say this?  Whatever happened to
the value ?  
</p>
</div>

</div>

<div id="outline-container-4-3" class="outline-3">
<h3 id="sec-4-3"><span class="section-number-3">4.3</span> Output is Looking Gooood!</h3>
<div class="outline-text-3" id="text-4-3">



<p>
looks-good
 array  of seq of char
 well-formatted and  print-all 
</p>
<p>
Putting it all Together
</p>
<p>
output  tabulateeqns input , where
tabulateeqnsinput TE, where 
convert-to-eqn-seqinput.
</p>
<p>
convert-to-eqn-seqinput is a companion to
parses-ok.
</p>

<p>
This output is such that
semantically-equal-eqnsinput, output and
 nat  looks-goodoutput .
</p>
</div>

</div>

<div id="outline-container-4-4" class="outline-3">
<h3 id="sec-4-4"><span class="section-number-3">4.4</span> Discussion</h3>
<div class="outline-text-3" id="text-4-4">


<p>
The following are some imagined questions from students.
</p>
<p>
If we have some 40 minutes to spend on this problem, do you
expect us to finish it this well?
</p>

<p>
Well, if you want an A, yes! More seriously, an answer along the lines
of Section 2 is certainly expected.  Section 3 is home work that you
should be able to do a good draft in a few, say 4, hours.  Such a
draft probably contains errors.  It is best to let others read it.  If
that is not possible, read it yourself, but after a day or two.
</p>
<p>
Is it worth spending this much effort in specifying instead of
producing several hundreds of lines of code?
</p>
<p>
I think so.  There are no statistics that can validate or
invalidate this belief.  Assuming that the program being developed is
not a throw-away program, but has a long lifetime, the careful
translation of requirements to specs and then paraphrasing them back
to the user/client is an effective technique to prevent expensive
design and coding errors.
</p>



</div>
</div>
</div>
</div>

<div id="postamble">
<hr size=1>Copyright &copy; 2013 <a href="mailto:pmateti@wright.edu">pmateti@wright.edu</a> &bull; <a href="http://www.wright.edu/~pmateti">www.wright.edu/~pmateti</a>
</div>
</body>
</html>
