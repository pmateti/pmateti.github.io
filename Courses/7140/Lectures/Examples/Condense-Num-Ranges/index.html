<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2020-09-09 Wed 15:29 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Condense the List of Numbers</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Prabhaker Mateti" />
<meta name="description" content="CS7140 Adv Software Engineering"
 />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<style> P {text-align: justify} code, pre {color: brown;} @media screen {BODY {margin: 10%} }</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2019 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href="../"> UP </a>
 |
 <a accesskey="H" href="../../Top/index.html"> HOME </a>
</div><div id="preamble" class="status">
<a href="../../"> ../../</a>
</div>
<div id="content">
<h1 class="title">Condense the List of Numbers</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgc1e9635">1. Informal Problem Statement</a></li>
<li><a href="#orgbf21103">2. Requirements Analysis</a>
<ul>
<li><a href="#org497c143">2.1. Problem Domain</a></li>
<li><a href="#org4f93d08">2.2. Input Format</a></li>
<li><a href="#orgc24fd19">2.3. Output Format</a></li>
<li><a href="#org4fba0ac">2.4. Relationship between Output and Input</a></li>
</ul>
</li>
<li><a href="#org6e28bcf">3. Specification</a>
<ul>
<li><a href="#orgdec30f5">3.1. List of Input Items</a></li>
<li><a href="#orgc83e4a0">3.2. List of Output Items</a></li>
<li><a href="#org9264517">3.3. Length</a></li>
</ul>
</li>
<li><a href="#orge11d909">4. A First Design</a>
<ul>
<li><a href="#org7622b0a">4.1. VHLL Psuedo Code</a></li>
<li><a href="#org0796c7f">4.2. Operations Assumed</a></li>
</ul>
</li>
<li><a href="#org5fe4821">5. Second Design</a>
<ul>
<li><a href="#orga3962ac">5.1. Design Idea</a></li>
<li><a href="#org783a977">5.2. Psuedo Code</a></li>
<li><a href="#org556fb9f">5.3. Operations Assumed</a></li>
</ul>
</li>
<li><a href="#org3ee7841">6. Implementation</a></li>
<li><a href="#org70ff142">7. Questions</a></li>
<li><a href="#org93687bf">8. Pedagogical Confessions</a></li>
<li><a href="#org1abf47d">9. Background</a></li>
<li><a href="#org88faf8b">10. End</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgc1e9635" class="outline-2">
<h2 id="orgc1e9635"><span class="section-number-2">1</span> Informal Problem Statement</h2>
<div class="outline-text-2" id="text-1">
<p>
Consider the informal description, given in the next paragraph, of
  a program.  Give (a) requirements analysis, (b) precise
  specifications (using logic/discrete mathematics, or in carefully
  worded English), (c) a design in pseudo-code VHLL.
</p>

<p>
/You are given a comma separated list of items in a text file.  The
list is terminated with a period.  Each item is either a number, or a
hyphen separated pair of numbers.  Your program should condense this
list as much as possible, as can be seen from the following examples./
</p>

<p>
<code>1,3,4,2,6,5,8,5,7.</code> 
becomes<br />
<code>1-8.</code>
</p>

<p>
<code>9,100-4870,4993,4871-4875,5016,5118,7-250,5100-5123.</code>
becomes<br />
<code>7-4875,4993,5016,5100-5123.</code>
</p>

<p>
<code>1103,1023-1100,87654321,1050-1150,1110,1250-1344.</code>
becomes<br />
<code>1023-1150,1250-1344,87654321.</code>
</p>

<p>
The rest of this handout is a `solution' to the above problem.
My comments are enclosed as in <i><i>* comments *</i></i>
</p>
</div>
</div>


<div id="outline-container-orgbf21103" class="outline-2">
<h2 id="orgbf21103"><span class="section-number-2">2</span> Requirements Analysis</h2>
<div class="outline-text-2" id="text-2">
<p>
Certain "debatable" resolutions of incomplete or ambiguous
requirements are shown slanted for emphasis.
</p>
</div>

<div id="outline-container-org497c143" class="outline-3">
<h3 id="org497c143"><span class="section-number-3">2.1</span> Problem Domain</h3>
<div class="outline-text-3" id="text-2-1">
<ol class="org-ol">
<li>A number in this problem is an integer.  We assume it is
representable as an <code>int</code> in the PL.</li>

<li>A range is written as m-n. This is three tokens: a number, a
hyphen, and another number. The first number m is expected to be
less than n.  <i>We will ignore it otherwise.</i></li>

<li>A single item appears as one number token, x. This is equivalent to
x-x.</li>

<li><i>We allow the numbers to be negative.</i></li>
</ol>
</div>
</div>

<div id="outline-container-org4f93d08" class="outline-3">
<h3 id="org4f93d08"><span class="section-number-3">2.2</span> Input Format</h3>
<div class="outline-text-3" id="text-2-2">
<ol class="org-ol">
<li>We are not permitting an empty list. We do not expect the ranges or
single items to appear in any particular order.</li>
</ol>
</div>
</div>

<div id="outline-container-orgc24fd19" class="outline-3">
<h3 id="orgc24fd19"><span class="section-number-3">2.3</span> Output Format</h3>
<div class="outline-text-3" id="text-2-3">
<ol class="org-ol">
<li>Same as input format.</li>
</ol>
</div>
</div>

<div id="outline-container-org4fba0ac" class="outline-3">
<h3 id="org4fba0ac"><span class="section-number-3">2.4</span> Relationship between Output and Input</h3>
<div class="outline-text-3" id="text-2-4">
<ol class="org-ol">
<li>The output produced should represent the same set of numbers
represented by the input. The output is required to be the shortest
possible. We take this to mean the length of the output viewed as a
sequence of tokens is to be minimized, and not, e.g., that all
blanks are to be eliminated.</li>

<li>The real need is clearly for a condensation of the list given in
some internal data structure format, rather than a textually
presented list of numbers.</li>
</ol>
</div>
</div>
</div>

<div id="outline-container-org6e28bcf" class="outline-2">
<h2 id="org6e28bcf"><span class="section-number-2">3</span> Specification</h2>
<div class="outline-text-2" id="text-3">
<p>
Some notation is inevitably needed to do precise specs. A list of, say
three items a, b, c, is written as [a, b, c]. If p is a pair of
things, \(p == (x, y)\), then p.1 is x, and p.2 is y.  Read ::= as
is-defined-as.  We abbreviate the phrase "such that" as <i>st</i>; in
mathematics, the vertical bar | stands for such-that.  In grammars, the
vertical bar | stands for "or".  Overloading!
</p>
</div>

<div id="outline-container-orgdec30f5" class="outline-3">
<h3 id="orgdec30f5"><span class="section-number-3">3.1</span> List of Input Items</h3>
<div class="outline-text-3" id="text-3-1">
<ol class="org-ol">
<li>A range <code>m-n</code> denotes the set range(m, n) which is defined as {z st
m &lt;= z &lt;= n}. A single-item <code>x</code> denotes the singleton set { x }.

<ol class="org-ol">
<li>setofoneitem(ars) ::= range(m, n), if ars is of the form &lt;number
m&gt;, hyphen, &lt;number n&gt;.  The angular brackets are meta
characters.</li>
<li>setofoneitem(ars) ::= { x } , if ars is of the form &lt;number x&gt;.</li>
</ol></li>

<li>The list is a comma-separated sequence of ranges and single items:

<ol class="org-ol">
<li>single-item ::= number</li>
<li>range ::= number hyphen number</li>
<li>rs ::= range | single-item</li>
<li>list ::= rs | list comma rs</li>
<li>external-list ::= list period</li>
<li>This is the grammar describing our input (and also output).
Written in "extended" BNF.  It assumes "standard" tokens for
numbers, hyphen, and period.</li>
<li>Read an introduction to  <a href="../../Languages/Grammars/">Grammars</a></li>
</ol></li>

<li>A list denotes the union of the sets denoted by the rs items it contains.
<ol class="org-ol">
<li>setoflist( [ars period] ) ::= setofoneitem(ars).</li>
<li>setoflist(q + [comma, ars, period]) ::= setoflist(q) +
setofoneitem(ars).  Here q is a list as defined above.  The plus
denotes catenation in the lhs, and set union in the rhs.</li>
</ol></li>

<li>The input "file" is expected to contain well-formed sequences that
conform to the above external-list.</li>
</ol>
</div>
</div>

<div id="outline-container-orgc83e4a0" class="outline-3">
<h3 id="orgc83e4a0"><span class="section-number-3">3.2</span> List of Output Items</h3>
<div class="outline-text-3" id="text-3-2">
<ol class="org-ol">
<li>The list ol that the program generates should be equal, as
a set, to the input list il.
<ol class="org-ol">
<li>setoflist(ol) == setoflist(il).</li>
</ol></li>

<li>The list ol is the shortest of all such lists: 
<ol class="org-ol">
<li>if a list ls != ol exists such that setoflist(ls) == setoflist(ol)
then length(ls) &gt; length(ol).</li>
</ol></li>

<li>The items in the list ol are in the increasing order.  That is, if
r<sub>i</sub> and r<sub>j</sub>, i &lt; j, are two ranges appearing in ol, then
<ol class="org-ol">
<li>the second number of r<sub>i</sub> is less than the first number of
r<sub>j</sub>, that is r<sub>i.2</sub>  &lt; r<sub>j.1</sub></li>
<li>For the purpose of this rule, a single item x is to be taken
as a range x-x.</li>
</ol></li>
</ol>
</div>
</div>


<div id="outline-container-org9264517" class="outline-3">
<h3 id="org9264517"><span class="section-number-3">3.3</span> Length</h3>
<div class="outline-text-3" id="text-3-3">
<ol class="org-ol">
<li>The lists are sequences of parse-able entities: rs, comma, rs,
comma, &#x2026;, period. The rs itself is a sequence; it is a 3-long
sequence if it is a range, a 1-long sequence if it is a single
item.
<ol class="org-ol">
<li>rslen(rs) ::= 3, if rs is a range</li>
<li>rslen(rs) ::= 1, if rs is a single item</li>
</ol></li>

<li>Unless we define length function carefully, we will permit a single
item x to appear as a range x-x in the output list.

<ol class="org-ol">
<li>length([rs, period]) ::= rslen(rs)</li>
<li>length(q + [comma, rs, period]) ::= length(q) + 1 + rslen(rs)
The plus denotes catenation in the lhs, and arithmetic plus in
the rhs.</li>
</ol></li>
</ol>
</div>
</div>
</div>


<div id="outline-container-orge11d909" class="outline-2">
<h2 id="orge11d909"><span class="section-number-2">4</span> A First Design</h2>
<div class="outline-text-2" id="text-4">
<p>
//* This first design appears inefficient, but it can be refined and
implemented in such a sophisticated way that it is faster than the
second design shown later. *//
</p>
</div>

<div id="outline-container-org7622b0a" class="outline-3">
<h3 id="org7622b0a"><span class="section-number-3">4.1</span> VHLL Psuedo Code</h3>
<div class="outline-text-3" id="text-4-1">
<p>
The pseudo code is shown in VHLL (very high level language).
</p>

<div class="org-src-container">
<pre class="src src-psuedo">var nums: set of numbers := {};

input-bgn(input-fnm);
repeat
  nums := nums + set-of(input-one-rs());
until input-next-token() == period;
input-end();

ol-initialize();
while nums != {} do
  var m: number := min-of(nums);
  var n: number := m;
  repeat
    nums := nums - {n};
    n := n + 1;
  until n not-in nums;
  ol-append(m, n-1);
od;
ol-period();
</pre>
</div>

<p>
The nums is stored as a set data type provided by the VHLL design
language.  The first loop construct the set of numbers represented by
the input.  The second loop constructs the shortest list of ranges.
</p>
</div>
</div>

<div id="outline-container-org0796c7f" class="outline-3">
<h3 id="org0796c7f"><span class="section-number-3">4.2</span> Operations Assumed</h3>
<div class="outline-text-3" id="text-4-2">
<p>
The design imagines the file content to be a <i>stream of tokens</i>: <code>rsf</code>
is an imaginary stream variable conceptually denoting the tokens read
so far; <code>ytr</code> is a similar var denoting the file content yet to be
read.
</p>

<p>
A `filter' that accomplishes the above is, strictly speaking,
a part of this and the next design. To save space, and to avoid
discussing the well-known, we skip the design of such a lexical
analyzer.
</p>

<div class="org-src-container">
<pre class="src src-pseudo">proc input-bgn(fnm: string)  // open/initialize input stream
  pre : file-exists(fnm)
  post: rsf ==  &lt;&gt;, ytr == file-content(fnm)

proc input-end()            // close/finalize input stream
  pre : is-defined(ytr)
  post: rsf ==  file-content(fnm), ytr ==  &lt; &gt;

func input-next-token(): token  // gives the next token from the input.
  pre : ytr !=  &lt; &gt;
  post: result ==  ytr0[1], rsf == rsf0 | result, ytr == ytr0[2 ..]

func input-one-rs(): rs
  // gives a representation of the next rs from the input.
  // The rs may be a range or a single item.
  pre : well-formed(ytr)
  post: exists i: {0, 1, 3} (
    result  ytr0[1 .. i], rsf == rsf0 | result, ytr == ytr0[i+1 ..],
    i == 0 - &gt; ytr[1] ==  period,
    i == 1 - &gt; ytr[1]  == comma,
    i == 3 - &gt; result[2] == hyphen
    )
</pre>
</div>
<p>
In the above, <code>rsf0</code> used in the post stands for the value <code>rsf</code> had
at the entry point.  Similarly for <code>ytr0</code>.
</p>


<div class="org-src-container">
<pre class="src src-pseudo">
func set-of(r): set of numbers
  // yields a set of numbers represented by the r.
  pre : is-rs(r)
  post: result == setofoneitem(r)

func min-of(A: set of number): number
  pre : A != {}
  post: result in A, for-all e: A (result &lt;= e)

infix + (A: set of T, B: set of T)  == A union B.
infix - (A: set of T, B: set of T)  == A difference B.
infix not-in (e: T, A: set of T)  not (e member-of A)

proc ol-initialize() ... // for you to finish!
proc ol-append() ...
proc ol-period() ...
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org5fe4821" class="outline-2">
<h2 id="org5fe4821"><span class="section-number-2">5</span> Second Design</h2>
<div class="outline-text-2" id="text-5">
</div>
<div id="outline-container-orga3962ac" class="outline-3">
<h3 id="orga3962ac"><span class="section-number-3">5.1</span> Design Idea</h3>
<div class="outline-text-3" id="text-5-1">
<p>
//* This concentrates on how to represent ranges. You will agree that
it is a lower-level (i.e., closer to the machine) design than the
first design. *//
</p>

<p>
The set is stored as an array of ranges. Each range is stored as
a pair of, its lowest and highest, numbers. The array may or may not
be kept sorted.
</p>
</div>
</div>

<div id="outline-container-org783a977" class="outline-3">
<h3 id="org783a977"><span class="section-number-3">5.2</span> Psuedo Code</h3>
<div class="outline-text-3" id="text-5-2">
<p>
This code is not as obvious as that of the previous design. Also,
even to understand it vaguely requires the detailed meaning of the
primitive operations.
</p>

<div class="org-src-container">
<pre class="src src-pseudo">var numa: grow-shrink array of pairs of numbers : create-empty();

input-bgn(input-fnm);
repeat
  numa-append(numa, input-one-rs());
until input-next-token() == period;
input-end();

out-bgn()
while not numa-empty() do
  var x: number : numa-index-of-min();
  var m: number : numa[x].1;  // .1 means first of the pair
  var n: number : numa[x].2;  // .2 means second
  repeat
    n := n + 1;
  until numa-ix-delete(n-1) ==  0;
  out-append(m, n-1);
od;
out-end();
</pre>
</div>
</div>
</div>

<div id="outline-container-org556fb9f" class="outline-3">
<h3 id="org556fb9f"><span class="section-number-3">5.3</span> Operations Assumed</h3>
<div class="outline-text-3" id="text-5-3">
<p>
A filter that accomplishes the lexical analysis is a part of this and
the previous design.
</p>

<div class="org-src-container">
<pre class="src src-pseudo">proc out-bgn()
  pre : true
  post: out == ""

proc out-append(x, y: number)
  pre : x  &lt;= y
  post: exists s, t: string (
    out  out0 | s | t,
    x == y - &gt; t  itoa(x),
    x  &lt; y - &gt; t  itoa(x) | "-" | itoa(y),
    s == if out0 ==  "" then "" else "," fi
  )

proc numa-append(m, n: number)
  pre : true
  post: numa == if m  &lt;= n then  numa0 |  &lt;m, n &gt; else numa0 fi

proc numa-ix-delete(b: number): number
  // function with side-effect on numa[]
  // if numa has a range that includes b delete that range, and
  // return the index of the deletion; otherwise return 0
  pre : true
  post: (result == 0) &amp;&amp; not-in-numa(b) &amp;&amp; (numa == numa0)
    or (
      (numa0[result].1  &lt; b) &amp;&amp; (b  &lt; numa0[result])
      &amp;&amp; (numa == numa0[1..result-1] | numa0[result+1..]))

aux func not-in-numa(b: number): boolean is
  not exists i: 1..len(numa) st
    (numa[i].1  &lt;= b) &amp;&amp; (b  &lt;= numa[i].2)

func numa-index-of-min(): number
  // deliver the index of the range with the least first number
  pre : numa non empty
  post: numa == numa0 &amp;&amp;
    numa[result].1 == min { numa[i].1 st i in 1..len(numa)}
</pre>
</div>
</div>
</div>
</div>


<div id="outline-container-org3ee7841" class="outline-2">
<h2 id="org3ee7841"><span class="section-number-2">6</span> Implementation</h2>
<div class="outline-text-2" id="text-6">
<p>
Your exercise! Part of HomeWork#1.  In Java8+, or Kotlin.  45 points.
Later, we will use this code during discussions of Testing, etc.
</p>


<ol class="org-ol">
<li>(40) Design and implement in Java two solutions to the Condense the
Numerical Ranges (CNR) Problem.  Use the above designs.  If you
prefer other designs, you must also include your design
descriptions.</li>

<li>(60) Write entry- and exit-assertions for all (well, longer than 10
lines) the methods, and all class invariants.</li>

<li>(30) Outline a rigorous (executable?) specification that every CNR
program should satisfy.</li>

<li>(50) Correctness must be the focus.  Not efficiency.</li>

<li>(20) Include test results for at least 200 examples.</li>

<li>(10) Must build cleanly with the latest Java8+.  Note that Java10
is around the corner.  Use a build system of your choice: ant,
maven or gradle.</li>

<li>(10) Write one or two paragraphs reporting on how you discovered and
revised the classes, and on your experience with the tools you used
to carry out this assignment.</li>
</ol>
</div>
</div>


<div id="outline-container-org70ff142" class="outline-2">
<h2 id="org70ff142"><span class="section-number-2">7</span> Questions</h2>
<div class="outline-text-2" id="text-7">
<ol class="org-ol">
<li>What does our spec require the program to produce for 1,2 as input?
Is it consistent with the requirements?</li>

<li>What about input, such as, 6, 7, 8?</li>

<li>How do we check if the specs are specifying what the requirements
are describing?</li>

<li>Same question between design(s) and specs.</li>

<li>In one of the examples we had a fairly large number, 87654321.
Which design works best for this?</li>

<li>There are minor flaws in the specs.  Discover and fix.</li>

<li>Give loop invariants and class invariants.</li>
</ol>
</div>
</div>


<div id="outline-container-org93687bf" class="outline-2">
<h2 id="org93687bf"><span class="section-number-2">8</span> Pedagogical Confessions</h2>
<div class="outline-text-2" id="text-8">
<p>
I began writing the specifications precisely. In the process I
discovered the ambiguities in the problem statement, and resolved
them as explained in requirements analysis.
</p>

<p>
I wrote the psuedo code design first, and then defined more
precisely the operations that I used in the design.
</p>

<p>
Of course, there are numerous other designs that are equally good. I
deliberately chose this second one because every student in my classes
so far constructs the linked list of input ranges so that they are in
non-decreasing order without duplicates or overlapped ranges. Do I
know why they instinctively do that? No.
</p>

<p>
Unless one gets into representing the set, of the first design, in
sophisticated ways, the second design is pretty efficient. Asymptotic
time bounds are rarely relevant in software engineering; in any case,
that was not the point of this exercise.
</p>
</div>
</div>


<div id="outline-container-org1abf47d" class="outline-2">
<h2 id="org1abf47d"><span class="section-number-2">9</span> Background</h2>
<div class="outline-text-2" id="text-9">
<ol class="org-ol">
<li><a href="../../Languages/Grammars/">An introduction to Grammars</a></li>
<li><a href="../..//Specs/specs-101.html">Specs 101</a></li>
<li>A description of our <a href="../../Design/vhll.html">VHL Design Language</a></li>
<li><a href="../../OODesign/design-by-contract.html">Design by Contract</a></li>
</ol>
</div>
</div>



<div id="outline-container-org88faf8b" class="outline-2">
<h2 id="org88faf8b"><span class="section-number-2">10</span> End</h2>
<div class="outline-text-2" id="text-10">
<ol class="org-ol">
<li>This file was re-edited from the original LaTeX file, and may
contain some typos.</li>
<li>Change log 2020-09-09 fixed the notations [] vs &lt;&gt; and | vs +</li>
</ol>
</div>
</div>
</div>
<div id="postamble" class="status">
<hr size=1>Copyright &copy; 2018 <a href="http://www.wright.edu/~pmateti"> www.wright.edu/~pmateti</a>  2018-05-22 2020-09-09
</div>
</body>
</html>
